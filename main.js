(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=function(){var n,r;function o(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e(this,"_title",void 0),e(this,"_description",void 0),e(this,"_duedate",void 0),e(this,"_priority",void 0),e(this,"_notes",void 0),e(this,"_checklist",void 0),e(this,"_id",void 0),this._id=o.id,o.id++,this._title=t,this._description=n,this._priority=r}return n=o,(r=[{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"description",get:function(){return this._description},set:function(t){this._description=t}},{key:"duedate",get:function(){return this._duedate},set:function(t){this._duedate=t}},{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"notes",get:function(){return this._notes},set:function(t){this._notes=t}},{key:"checklist",get:function(){return this._checklist},set:function(t){this._checklist=t}},{key:"id",get:function(){return this._id}}])&&t(n.prototype,r),o}();function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e(n,"id",1);var i=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"_todoList",[]),a(this,"_id",void 0),a(this,"_name",void 0),a(this,"addTodo",(function(t){n._todoList.push(t)})),this._id=t.id,t.id++,this._name=e}return o(t,[{key:"todoList",get:function(){return this._todoList}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}}]),o(t,[{key:"deleteTodo",value:function(t){for(var e=[],n=0;n<this._todoList.length;n++)!this._todoList[n].id===t&&e.push(this._todoList[n]);this._todoList=[].concat(e)}}]),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}a(i,"id",1);var s=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"_projectList",[]),d(this,"addProject",(function(t){e._projectList.push(t)})),d(this,"updateProjectName",(function(t,n){e._projectList.forEach((function(e){e.id===n&&(e.name=t)}))})),d(this,"removeProject",(function(t){e._projectList=e._projectList.filter((function(e){return e.id!==t}))}))}var e,n;return e=t,(n=[{key:"getProject",value:function(t){return this._projectList.find((function(e){return e.id===t}))}},{key:"projectList",get:function(){return this._projectList}}])&&c(e.prototype,n),t}(),l=function(){var t=document.getElementById("project-wrapper"),e=document.getElementById("project-form"),n=document.getElementById("project-name"),r=(document.getElementById("get-project-name"),document.getElementById("sidenav"));function o(e){var n=t.querySelectorAll("li");return Array.from(n).find((function(t){return t.id==="project-".concat(e)}))}return{createProjectUI:function(e,n){var o=document.createElement("li");o.id="project-".concat(n);var a=document.createElement("div");a.id="project-row",a.classList.add("project-row"),r.classList.contains("show-sidenav")||a.classList.add("project-row-whitespace");var i=document.createElement("div");i.classList.add("project-header");var c=document.createElement("img");c.classList.add("toggle-task-btn"),c.src="./images/icons8-expand-arrow-16.png";var d=document.createElement("button");d.classList.add("project-name"),d.dataset.id="projectName-".concat(n),d.textContent=e;var s=document.createElement("button");s.textContent="-",s.classList.add("remove-project"),s.dataset.id="remove-project",i.appendChild(c),i.appendChild(d),i.appendChild(s);var l=document.createElement("div");l.dataset.id="task-wrapper",l.classList.add("task-wrapper"),l.classList.add("task-wrapper-off"),a.appendChild(i),a.appendChild(l),o.appendChild(a),t.appendChild(o)},addProjectForm:e,inputElement:n,closeProjectInputName:function(){e.reset(),document.getElementById("get-project-name").classList.toggle("get-project-name-off")},removeProject:function(e){t.querySelectorAll("li").forEach((function(t){t.id==="project-".concat(e)&&t.remove()}))},projectWrapper:t,getProject:o,removeProjectFromTaskForm:function(t){document.getElementById("project-".concat(t)).remove()},addProjectToTaskForm:function(t,e){var n=document.getElementById("todo-form-projects"),r=document.createElement("option");r.value=t,r.id="project-".concat(t),r.textContent=e,n.appendChild(r)},getTaskWrapper:function(t){return o(t).querySelector('div[data-id="task-wrapper"]')}}}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"HIGH",get:function(){return{color:"#e53935",value:0,text:"high"}}},{key:"MEDIUM",get:function(){return{color:"#FFB300",value:1,text:"medium"}}},{key:"LOW",get:function(){return{color:"#43A047",value:2,text:"low"}}}],null&&u(e.prototype,null),n&&u(e,n),t}();function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f,v,h,y,g,j,b,k,E,L=(v=document.getElementsByClassName("content")[0],h=document.getElementById("todo-form"),y=document.getElementById("submit-todo"),g=document.getElementsByName("priority"),j=document.getElementById("todo-title"),b=document.getElementById("todo-description"),k=document.getElementById("todo-form-projects"),m(f={createTaskNavBar:function(t,e,n){var r=document.createElement("div");r.classList.add("task"),r.id="navTask-".concat(t);var o=document.createElement("div");switch(o.classList.add("priority-icon"),n){case p.LOW.text:o.style.backgroundColor=p.LOW.color;break;case p.MEDIUM.text:o.style.backgroundColor=p.MEDIUM.color;break;case p.HIGH.text:o.style.backgroundColor=p.HIGH.color}var a=document.createElement("div");return a.classList.add("task-name"),a.textContent=e,r.appendChild(o),r.appendChild(a),r},createTask:E=function(t,e,n,r,o){var a=document.createElement("div");a.classList.add("card"),a.id="card-".concat(t),a.dataset.project=e;var i=document.createElement("div");switch(i.classList.add("card-header"),o){case p.LOW.text:i.style.backgroundColor=p.LOW.color;break;case p.MEDIUM.text:i.style.backgroundColor=p.MEDIUM.color;break;case p.HIGH.text:i.style.backgroundColor=p.HIGH.color}var c=document.createElement("h4");c.textContent=n;var d=document.createElement("button");d.classList.add("button2"),d.textContent="-",i.appendChild(c),i.appendChild(d);var s=document.createElement("textarea");s.classList.add("card-body"),s.value=r,a.appendChild(i),a.appendChild(s),v.appendChild(a)},formPriorityElements:g,addTodoForm:h,todoSubmitBtn:y,formDescriptionElement:b,formTitleElement:j,formProjectElement:k,closeTaskInputForm:function(){h.reset(),document.getElementById("add-todo-modal").classList.toggle("add-todo-modal-off")}},"createTask",E),m(f,"getTasksByProjectId",(function(t){return document.querySelectorAll('div[data-project="'.concat(t,'"]'))})),m(f,"content",v),m(f,"getNavTaskById",(function(t){return document.getElementById("navTask-".concat(t))})),f);function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _,w=new s;(_=new i("default"))._id=0,w.addProject(_),l.createProjectUI(_.name,_.id),document.getElementById("project-0").querySelector(".project-row").classList.remove("project-row-whitespace"),l.addProjectForm.addEventListener("submit",(function(t){t.preventDefault();var e=l.inputElement.value,n=function(t){var e=new i(t);return w.addProject(e),l.createProjectUI(e.name,e.id),e.id}(e);l.closeProjectInputName(),l.addProjectToTaskForm(n,e)})),l.projectWrapper.addEventListener("click",(function(t){if("remove-project"===t.target.dataset.id){var e=t.target.parentNode.parentNode.parentNode.id.split("-")[1];!function(t){0!==t&&(console.log(w.projectList),w.removeProject(t),l.removeProject(t),l.removeProjectFromTaskForm(t),L.getTasksByProjectId(t).forEach((function(t){t.remove()})),console.log(w.projectList))}(parseInt(e))}})),l.projectWrapper.addEventListener("click",(function(t){if(t.target.classList.contains("project-name")){var e=t.target,n=parseInt(e.dataset.id.split("-")[1]),r=L.content.querySelectorAll(".card");r=function(t){if(Array.isArray(t))return I(t)}(o=Array.from(r).map((function(t){return parseInt(t.dataset.project)!==n?t.classList.add("card-off"):t.classList.remove("card-off")})))||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o})),L.content.addEventListener("click",(function(t){if(t.target.classList.contains("button2")){var e=t.target.parentNode.parentNode,n=e.id,r=parseInt(e.dataset.project),o=parseInt(n.split("-")[1]);e.remove(),L.getNavTaskById(o).remove();var a=w.getProject(r);console.log(a._todoList),a.deleteTodo(o),console.log(a._todoList)}})),L.content.addEventListener("change",(function(t){if(t.target.classList.contains("card-body")){var e=t.target,n=t.target.parentNode,r=n.id,o=parseInt(r.split("-")[1]),a=parseInt(n.dataset.project);w.getProject(a).todoList.find((function(t){return t.id===o})).description=e.value,console.log(w.getProject(a).todoList)}})),L.addTodoForm.addEventListener("submit",(function(t){var e,r;t.preventDefault(),function(t,e,r,o){var a=new n(e,r,o,t);console.table(w.projectList);for(var i=w.projectList,c=0;c<i.length;c++)if(i[c].id===t){i[c].addTodo(a);break}var d=L.createTaskNavBar(a.id,a.title,a.priority);l.getTaskWrapper(t).appendChild(d),L.createTask(a.id,t,a.title,a.description,a.priority)}((r=L.formProjectElement,parseInt(r.value)),L.formTitleElement.value,L.formDescriptionElement.value,(L.formPriorityElements.forEach((function(t){t.checked&&(e=t.value)})),e)),L.closeTaskInputForm()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL1RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9Qcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvTWFpbkFwcC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3Byb2plY3RVSS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ByaW9yaXR5RW51bS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3Rhc2tVSS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbIlRvZG8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJ0aGlzIiwiX2lkIiwiaWQiLCJfdGl0bGUiLCJfZGVzY3JpcHRpb24iLCJfcHJpb3JpdHkiLCJ2YWx1ZSIsIl9kdWVkYXRlIiwiX25vdGVzIiwiX2NoZWNrbGlzdCIsIlByb2plY3QiLCJuYW1lIiwidG9kbyIsIl90b2RvTGlzdCIsInB1c2giLCJfbmFtZSIsIm5ld0FycmF5IiwiaSIsImxlbmd0aCIsIk1haW5BcHAiLCJwcm9qZWN0IiwiX3Byb2plY3RMaXN0IiwiZm9yRWFjaCIsImZpbHRlciIsImZpbmQiLCJwcm9qZWN0VUkiLCJwcm9qZWN0V3JhcHBlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRQcm9qZWN0Rm9ybSIsImlucHV0RWxlbWVudCIsInNpZGVuYXYiLCJnZXRQcm9qZWN0IiwibGlFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJBcnJheSIsImZyb20iLCJsaUVsZW1lbnQiLCJjcmVhdGVQcm9qZWN0VUkiLCJsaSIsImNyZWF0ZUVsZW1lbnQiLCJwcm9qZWN0Um93IiwiY2xhc3NMaXN0IiwiYWRkIiwiY29udGFpbnMiLCJwcm9qZWN0SGVhZGVyIiwidG9nZ2xlVGFza0J0biIsInNyYyIsInByb2plY3ROYW1lIiwiZGF0YXNldCIsInRleHRDb250ZW50IiwicmVtb3ZlUHJvamVjdEJ0biIsImFwcGVuZENoaWxkIiwidGFza1dyYXBwZXIiLCJjbG9zZVByb2plY3RJbnB1dE5hbWUiLCJyZXNldCIsInRvZ2dsZSIsInJlbW92ZVByb2plY3QiLCJyZW1vdmUiLCJyZW1vdmVQcm9qZWN0RnJvbVRhc2tGb3JtIiwiYWRkUHJvamVjdFRvVGFza0Zvcm0iLCJ0b2RvRm9ybVByb2plY3QiLCJvcHRpb24iLCJnZXRUYXNrV3JhcHBlciIsInF1ZXJ5U2VsZWN0b3IiLCJjb2xvciIsInRleHQiLCJjb250ZW50IiwiYWRkVG9kb0Zvcm0iLCJ0b2RvU3VibWl0QnRuIiwiZm9ybVByaW9yaXR5RWxlbWVudHMiLCJmb3JtVGl0bGVFbGVtZW50IiwiZm9ybURlc2NyaXB0aW9uRWxlbWVudCIsImZvcm1Qcm9qZWN0RWxlbWVudCIsImNyZWF0ZVRhc2siLCJ0YXNrVUkiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJjcmVhdGVUYXNrTmF2QmFyIiwicHJpb3JpdHlJbiIsInRhc2tFbGVtZW50IiwicHJpb3JpdHlJY29uIiwiTE9XIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJNRURJVU0iLCJISUdIIiwidGFza05hbWUiLCJwcm9qZWN0SWQiLCJjYXJkIiwiY2FyZEhlYWRlciIsImg0IiwiZGVsZXRlVGFza0J0biIsImNhcmRCb2R5IiwiY2xvc2VUYXNrSW5wdXRGb3JtIiwiZGVmYXVsdFByb2plY3QiLCJtcCIsImFkZFByb2plY3QiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwic3BsaXQiLCJjb25zb2xlIiwibG9nIiwicHJvamVjdExpc3QiLCJnZXRUYXNrc0J5UHJvamVjdElkIiwiZWxlbWVudCIsImRlbGV0ZVByb2plY3QiLCJwYXJzZUludCIsInByb2plY3ROYW1lRWxlbWVudCIsImNhcmRBcnJheSIsIm1hcCIsImNhcmRJZCIsInRhc2tJZCIsInByb2plY3RPZlRhc2siLCJkZWxldGVUb2RvIiwidG9kb0xpc3QiLCJjaGVja2VkVmFsdWUiLCJ0YXNrRGVzY3IiLCJ0YXNrUHJpbyIsInRhc2siLCJ0YWJsZSIsImFycmF5IiwiYWRkVG9kbyIsInRhc2tET01OYXZFbGVtZW50IiwiYWRkVGFzayIsImNoZWNrZWQiXSwibWFwcGluZ3MiOiJxVEFBTUEsRSxtQkFnREosV0FBWUMsRUFBT0MsRUFBYUMsSSw0RkFBVSw2TEFDeENDLEtBQUtDLElBQU1MLEVBQUtNLEdBQ2hCTixFQUFLTSxLQUNMRixLQUFLRyxPQUFTTixFQUNkRyxLQUFLSSxhQUFlTixFQUNwQkUsS0FBS0ssVUFBWU4sRSwyQ0FsRGpCLE9BQU9DLEtBQUtHLFEsYUFFSkcsR0FDUk4sS0FBS0csT0FBU0csSSxrQ0FJZCxPQUFPTixLQUFLSSxjLGFBRUVFLEdBQ2ROLEtBQUtJLGFBQWVFLEksOEJBSXBCLE9BQU9OLEtBQUtPLFUsYUFFRkQsR0FDVk4sS0FBS08sU0FBV0QsSSwrQkFJaEIsT0FBT04sS0FBS0ssVyxhQUVEQyxHQUNYTixLQUFLSyxVQUFZQyxJLDRCQUlqQixPQUFPTixLQUFLUSxRLGFBRUpGLEdBQ1JOLEtBQUtRLE9BQVNGLEksZ0NBSWQsT0FBT04sS0FBS1MsWSxhQUVBSCxHQUNaTixLQUFLUyxXQUFhSCxJLHlCQUtsQixPQUFPTixLQUFLQyxTLCtXQTlDVkwsRSxLQTJDUSxHLElDM0NSYyxFLFdBaUJKLFdBQVlDLEdBQU0sWSw0RkFBQSw0QkFmTixJQWVNLDhEQU1SLFNBQUNDLEdBQ1QsRUFBS0MsVUFBVUMsS0FBS0YsTUFOcEJaLEtBQUtDLElBQU1TLEVBQVFSLEdBQ25CUSxFQUFRUixLQUNSRixLQUFLZSxNQUFRSixFLDJDQWhCYixPQUFPWCxLQUFLYSxZLHlCQUlaLE9BQU9iLEtBQUtDLE0sMkJBSVosT0FBT0QsS0FBS2UsTyxhQUVMVCxHQUNQTixLQUFLZSxNQUFRVCxNLHNDQVlKSixHQUVULElBREEsSUFBSWMsRUFBVyxHQUNOQyxFQUFJLEVBQUdBLEVBQUlqQixLQUFLYSxVQUFVSyxPQUFRRCxLQUNwQ2pCLEtBQUthLFVBQVVJLEdBQUdmLEtBQU9BLEdBQzVCYyxF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QkFBdUJsRSxPQUd0QnFFLEVBQU9MLHFCQUViaEQsU0FBUSxTQUFDcUYsR0FDWkEsRUFBUW9CLFVBQ1ZULEVBQWVYLEVBQVFyRyxVQUdwQmdILElBMENQM0MsMkIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFRvZG8ge1xuICBfdGl0bGU7XG4gIGdldCB0aXRsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGl0bGU7XG4gIH1cbiAgc2V0IHRpdGxlKHZhbHVlKSB7XG4gICAgdGhpcy5fdGl0bGUgPSB2YWx1ZTtcbiAgfVxuICBfZGVzY3JpcHRpb247XG4gIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XG4gIH1cbiAgc2V0IGRlc2NyaXB0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSB2YWx1ZTtcbiAgfVxuICBfZHVlZGF0ZTtcbiAgZ2V0IGR1ZWRhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2R1ZWRhdGU7XG4gIH1cbiAgc2V0IGR1ZWRhdGUodmFsdWUpIHtcbiAgICB0aGlzLl9kdWVkYXRlID0gdmFsdWU7XG4gIH1cbiAgX3ByaW9yaXR5O1xuICBnZXQgcHJpb3JpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ByaW9yaXR5O1xuICB9XG4gIHNldCBwcmlvcml0eSh2YWx1ZSkge1xuICAgIHRoaXMuX3ByaW9yaXR5ID0gdmFsdWU7XG4gIH1cbiAgX25vdGVzO1xuICBnZXQgbm90ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25vdGVzO1xuICB9XG4gIHNldCBub3Rlcyh2YWx1ZSkge1xuICAgIHRoaXMuX25vdGVzID0gdmFsdWU7XG4gIH1cbiAgX2NoZWNrbGlzdDtcbiAgZ2V0IGNoZWNrbGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tsaXN0O1xuICB9XG4gIHNldCBjaGVja2xpc3QodmFsdWUpIHtcbiAgICB0aGlzLl9jaGVja2xpc3QgPSB2YWx1ZTtcbiAgfVxuICBzdGF0aWMgaWQgPSAxO1xuICBfaWQ7XG4gIGdldCBpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cbiAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSkge1xuICAgIHRoaXMuX2lkID0gVG9kby5pZDtcbiAgICBUb2RvLmlkKys7XG4gICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuX3ByaW9yaXR5ID0gcHJpb3JpdHk7XG4gIH1cbn1cblxuZXhwb3J0IHsgVG9kbyB9O1xuIiwiY2xhc3MgUHJvamVjdCB7XG4gIHN0YXRpYyBpZCA9IDE7XG4gIF90b2RvTGlzdCA9IFtdO1xuICBnZXQgdG9kb0xpc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RvZG9MaXN0O1xuICB9XG4gIF9pZDtcbiAgZ2V0IGlkKCkge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuICBfbmFtZTtcbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gIH1cbiAgc2V0IG5hbWUodmFsdWUpIHtcbiAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gIH1cbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHRoaXMuX2lkID0gUHJvamVjdC5pZDtcbiAgICBQcm9qZWN0LmlkKys7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gIH1cblxuICBhZGRUb2RvID0gKHRvZG8pID0+IHtcbiAgICB0aGlzLl90b2RvTGlzdC5wdXNoKHRvZG8pO1xuICB9O1xuXG4gIGRlbGV0ZVRvZG8oaWQpIHtcbiAgICBsZXQgbmV3QXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3RvZG9MaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXRoaXMuX3RvZG9MaXN0W2ldLmlkID09PSBpZCkge1xuICAgICAgICBuZXdBcnJheS5wdXNoKHRoaXMuX3RvZG9MaXN0W2ldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fdG9kb0xpc3QgPSBbLi4ubmV3QXJyYXldO1xuICB9XG59XG5cbmV4cG9ydCB7IFByb2plY3QgfTtcbiIsImNsYXNzIE1haW5BcHAge1xuICBfcHJvamVjdExpc3QgPSBbXTtcblxuICBhZGRQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcbiAgICB0aGlzLl9wcm9qZWN0TGlzdC5wdXNoKHByb2plY3QpO1xuICB9O1xuXG4gIGdldFByb2plY3QoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvamVjdExpc3QuZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5pZCA9PT0gaWQpO1xuICB9XG5cbiAgdXBkYXRlUHJvamVjdE5hbWUgPSAobmFtZSwgaWQpID0+IHtcbiAgICB0aGlzLl9wcm9qZWN0TGlzdC5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICBpZiAocHJvamVjdC5pZCA9PT0gaWQpIHtcbiAgICAgICAgcHJvamVjdC5uYW1lID0gbmFtZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZW1vdmVQcm9qZWN0ID0gKGlkKSA9PiB7XG4gICAgdGhpcy5fcHJvamVjdExpc3QgPSB0aGlzLl9wcm9qZWN0TGlzdC5maWx0ZXIoXG4gICAgICAocHJvamVjdCkgPT4gcHJvamVjdC5pZCAhPT0gaWRcbiAgICApO1xuICB9O1xuXG4gIGdldCBwcm9qZWN0TGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvamVjdExpc3Q7XG4gIH1cbn1cblxuZXhwb3J0IHsgTWFpbkFwcCB9O1xuIiwiY29uc3QgcHJvamVjdFVJID0gKCgpID0+IHtcbiAgY29uc3QgcHJvamVjdFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3Qtd3JhcHBlclwiKTtcbiAgY29uc3QgYWRkUHJvamVjdEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtZm9ybVwiKTtcbiAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LW5hbWVcIik7XG4gIGNvbnN0IGdldFByb2plY3ROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZXQtcHJvamVjdC1uYW1lXCIpO1xuICBjb25zdCBzaWRlbmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlbmF2XCIpO1xuXG4gIGZ1bmN0aW9uIGNsb3NlUHJvamVjdElucHV0TmFtZSgpIHtcbiAgICBhZGRQcm9qZWN0Rm9ybS5yZXNldCgpO1xuICAgIGNvbnN0IGdldFByb2plY3ROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZXQtcHJvamVjdC1uYW1lXCIpO1xuICAgIGdldFByb2plY3ROYW1lLmNsYXNzTGlzdC50b2dnbGUoXCJnZXQtcHJvamVjdC1uYW1lLW9mZlwiKTtcbiAgfVxuICBmdW5jdGlvbiBnZXRQcm9qZWN0KGlkKSB7XG4gICAgY29uc3QgbGlFbGVtZW50cyA9IHByb2plY3RXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaVwiKTtcbiAgICBsZXQgZm91bmRFbGVtZW50O1xuICAgIHJldHVybiBBcnJheS5mcm9tKGxpRWxlbWVudHMpLmZpbmQoXG4gICAgICAobGlFbGVtZW50KSA9PiBsaUVsZW1lbnQuaWQgPT09IGBwcm9qZWN0LSR7aWR9YFxuICAgICk7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0VGFza1dyYXBwZXIoaWQpIHtcbiAgICBjb25zdCBsaUVsZW1lbnQgPSBnZXRQcm9qZWN0KGlkKTtcbiAgICByZXR1cm4gbGlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdltkYXRhLWlkPVwidGFzay13cmFwcGVyXCJdJyk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVQcm9qZWN0KGlkKSB7XG4gICAgY29uc3QgbGlFbGVtZW50cyA9IHByb2plY3RXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaVwiKTtcbiAgICBsaUVsZW1lbnRzLmZvckVhY2goKGxpRWxlbWVudCkgPT4ge1xuICAgICAgaWYgKGxpRWxlbWVudC5pZCA9PT0gYHByb2plY3QtJHtpZH1gKSB7XG4gICAgICAgIGxpRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0VUkobmFtZSwgaWQpIHtcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBsaS5pZCA9IGBwcm9qZWN0LSR7aWR9YDtcbiAgICB7XG4gICAgICBjb25zdCBwcm9qZWN0Um93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHByb2plY3RSb3cuaWQgPSBcInByb2plY3Qtcm93XCI7XG4gICAgICBwcm9qZWN0Um93LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXJvd1wiKTtcbiAgICAgIGlmICghc2lkZW5hdi5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93LXNpZGVuYXZcIikpIHtcbiAgICAgICAgcHJvamVjdFJvdy5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1yb3ctd2hpdGVzcGFjZVwiKTtcbiAgICAgIH1cbiAgICAgIHtcbiAgICAgICAgY29uc3QgcHJvamVjdEhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHByb2plY3RIZWFkZXIuY2xhc3NMaXN0LmFkZChcInByb2plY3QtaGVhZGVyXCIpO1xuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgdG9nZ2xlVGFza0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgICAgdG9nZ2xlVGFza0J0bi5jbGFzc0xpc3QuYWRkKFwidG9nZ2xlLXRhc2stYnRuXCIpO1xuICAgICAgICAgIHRvZ2dsZVRhc2tCdG4uc3JjID0gXCIuL2ltYWdlcy9pY29uczgtZXhwYW5kLWFycm93LTE2LnBuZ1wiO1xuICAgICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICBwcm9qZWN0TmFtZS5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1uYW1lXCIpO1xuICAgICAgICAgIHByb2plY3ROYW1lLmRhdGFzZXQuaWQgPSBgcHJvamVjdE5hbWUtJHtpZH1gO1xuICAgICAgICAgIHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgICBjb25zdCByZW1vdmVQcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICByZW1vdmVQcm9qZWN0QnRuLnRleHRDb250ZW50ID0gXCItXCI7XG4gICAgICAgICAgcmVtb3ZlUHJvamVjdEJ0bi5jbGFzc0xpc3QuYWRkKFwicmVtb3ZlLXByb2plY3RcIik7XG4gICAgICAgICAgcmVtb3ZlUHJvamVjdEJ0bi5kYXRhc2V0LmlkID0gXCJyZW1vdmUtcHJvamVjdFwiO1xuICAgICAgICAgIHByb2plY3RIZWFkZXIuYXBwZW5kQ2hpbGQodG9nZ2xlVGFza0J0bik7XG4gICAgICAgICAgcHJvamVjdEhlYWRlci5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XG4gICAgICAgICAgcHJvamVjdEhlYWRlci5hcHBlbmRDaGlsZChyZW1vdmVQcm9qZWN0QnRuKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwcm9qZWN0Um93LmFwcGVuZENoaWxkKHByb2plY3RIZWFkZXIpO1xuICAgICAgICBjb25zdCB0YXNrV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRhc2tXcmFwcGVyLmRhdGFzZXQuaWQgPSBcInRhc2std3JhcHBlclwiO1xuICAgICAgICB0YXNrV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwidGFzay13cmFwcGVyXCIpO1xuICAgICAgICB0YXNrV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwidGFzay13cmFwcGVyLW9mZlwiKTtcbiAgICAgICAge1xuICAgICAgICAgIC8vIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAvLyB0YXNrLmNsYXNzTGlzdC5hZGQoJ3Rhc2snKTtcbiAgICAgICAgICAvLyB7XG4gICAgICAgICAgLy8gXHRjb25zdCBwcmlvcml0eUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAvLyBcdHByaW9yaXR5SWNvbi5jbGFzc0xpc3QuYWRkKCdwcmlvcml0eS1pY29uJyk7XG4gICAgICAgICAgLy8gXHRjb25zdCB0YXNrTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIC8vIFx0dGFza05hbWUuY2xhc3NMaXN0LmFkZCgndGFzay1uYW1lJyk7XG4gICAgICAgICAgLy8gXHR0YXNrTmFtZS50ZXh0Q29udGVudCA9J2RvIHRoZSBhZnBlb3Nmaic7XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgICAgIHByb2plY3RSb3cuYXBwZW5kQ2hpbGQocHJvamVjdEhlYWRlcik7XG4gICAgICAgIHByb2plY3RSb3cuYXBwZW5kQ2hpbGQodGFza1dyYXBwZXIpO1xuICAgICAgfVxuICAgICAgbGkuYXBwZW5kQ2hpbGQocHJvamVjdFJvdyk7XG4gICAgfVxuICAgIHByb2plY3RXcmFwcGVyLmFwcGVuZENoaWxkKGxpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFByb2plY3RUb1Rhc2tGb3JtKGlkLCBuYW1lKSB7XG4gICAgY29uc3QgdG9kb0Zvcm1Qcm9qZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvLWZvcm0tcHJvamVjdHNcIik7XG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBvcHRpb24udmFsdWUgPSBpZDtcbiAgICBvcHRpb24uaWQgPSBgcHJvamVjdC0ke2lkfWA7XG4gICAgb3B0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0b2RvRm9ybVByb2plY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVByb2plY3RGcm9tVGFza0Zvcm0oaWQpIHtcbiAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHByb2plY3QtJHtpZH1gKTtcbiAgICBvcHRpb25FbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVQcm9qZWN0VUksXG4gICAgYWRkUHJvamVjdEZvcm0sXG4gICAgaW5wdXRFbGVtZW50LFxuICAgIGNsb3NlUHJvamVjdElucHV0TmFtZSxcbiAgICByZW1vdmVQcm9qZWN0LFxuICAgIHByb2plY3RXcmFwcGVyLFxuICAgIGdldFByb2plY3QsXG4gICAgcmVtb3ZlUHJvamVjdEZyb21UYXNrRm9ybSxcbiAgICBhZGRQcm9qZWN0VG9UYXNrRm9ybSxcbiAgICBnZXRUYXNrV3JhcHBlcixcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IHByb2plY3RVSSB9O1xuIiwiY2xhc3MgcHJpb3JpdHkge1xuICBzdGF0aWMgZ2V0IEhJR0goKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbG9yOiBcIiNlNTM5MzVcIiwgLy9yZWRpc2hcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgdGV4dDogXCJoaWdoXCIsXG4gICAgfTtcbiAgfVxuICBzdGF0aWMgZ2V0IE1FRElVTSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29sb3I6IFwiI0ZGQjMwMFwiLCAvL3llbGxvd2lzaFxuICAgICAgdmFsdWU6IDEsXG4gICAgICB0ZXh0OiBcIm1lZGl1bVwiLFxuICAgIH07XG4gIH1cbiAgc3RhdGljIGdldCBMT1coKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbG9yOiBcIiM0M0EwNDdcIiwgLy9ncmVlbmlzaFxuICAgICAgdmFsdWU6IDIsXG4gICAgICB0ZXh0OiBcImxvd1wiLFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IHsgcHJpb3JpdHkgfTtcbiIsImltcG9ydCB7IHByaW9yaXR5IH0gZnJvbSBcIi4vcHJpb3JpdHlFbnVtXCI7XG5jb25zdCB0YXNrVUkgPSAoKCkgPT4ge1xuICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvbnRlbnRcIilbMF07XG4gIGNvbnN0IGFkZFRvZG9Gb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvLWZvcm1cIik7XG4gIGNvbnN0IHRvZG9TdWJtaXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC10b2RvXCIpO1xuICBjb25zdCBmb3JtUHJpb3JpdHlFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKFwicHJpb3JpdHlcIik7XG4gIGNvbnN0IGZvcm1UaXRsZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG8tdGl0bGVcIik7XG4gIGNvbnN0IGZvcm1EZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG8tZGVzY3JpcHRpb25cIik7XG4gIGNvbnN0IGZvcm1Qcm9qZWN0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby1mb3JtLXByb2plY3RzXCIpO1xuXG4gIGZ1bmN0aW9uIGNsb3NlVGFza0lucHV0Rm9ybSgpIHtcbiAgICBhZGRUb2RvRm9ybS5yZXNldCgpO1xuICAgIGNvbnN0IHRvZG9Nb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLXRvZG8tbW9kYWxcIik7XG4gICAgdG9kb01vZGFsLmNsYXNzTGlzdC50b2dnbGUoXCJhZGQtdG9kby1tb2RhbC1vZmZcIik7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYXNrc0J5UHJvamVjdElkKHByb2plY3RJZCkge1xuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBkaXZbZGF0YS1wcm9qZWN0PVwiJHtwcm9qZWN0SWR9XCJdYCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYXNrQnlJZChpZCkge1xuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgY2FyZC0ke2lkfWApO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TmF2VGFza0J5SWQoaWQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG5hdlRhc2stJHtpZH1gKTtcbiAgfVxuXG4gIGNvbnN0IGNyZWF0ZVRhc2sgPSAoaWQsIHByb2plY3RJZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eUluKSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwiY2FyZFwiKTtcbiAgICBjYXJkLmlkID0gYGNhcmQtJHtpZH1gO1xuICAgIGNhcmQuZGF0YXNldC5wcm9qZWN0ID0gcHJvamVjdElkOyAvL2l0IHdpbGwgd29yayBhcyBhIGZpbHRlclxuICAgIHtcbiAgICAgIGNvbnN0IGNhcmRIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY2FyZEhlYWRlci5jbGFzc0xpc3QuYWRkKFwiY2FyZC1oZWFkZXJcIik7XG5cbiAgICAgIHN3aXRjaCAocHJpb3JpdHlJbikge1xuICAgICAgICBjYXNlIHByaW9yaXR5LkxPVy50ZXh0OiB7XG4gICAgICAgICAgY2FyZEhlYWRlci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwcmlvcml0eS5MT1cuY29sb3I7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBwcmlvcml0eS5NRURJVU0udGV4dDoge1xuICAgICAgICAgIGNhcmRIZWFkZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcHJpb3JpdHkuTUVESVVNLmNvbG9yO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgcHJpb3JpdHkuSElHSC50ZXh0OiB7XG4gICAgICAgICAgY2FyZEhlYWRlci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwcmlvcml0eS5ISUdILmNvbG9yO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHtcbiAgICAgICAgY29uc3QgaDQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDRcIik7XG4gICAgICAgIGg0LnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgIGNvbnN0IGRlbGV0ZVRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBkZWxldGVUYXNrQnRuLmNsYXNzTGlzdC5hZGQoXCJidXR0b24yXCIpO1xuICAgICAgICBkZWxldGVUYXNrQnRuLnRleHRDb250ZW50ID0gXCItXCI7XG4gICAgICAgIGNhcmRIZWFkZXIuYXBwZW5kQ2hpbGQoaDQpO1xuICAgICAgICBjYXJkSGVhZGVyLmFwcGVuZENoaWxkKGRlbGV0ZVRhc2tCdG4pO1xuICAgICAgfVxuICAgICAgY29uc3QgY2FyZEJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG4gICAgICBjYXJkQm9keS5jbGFzc0xpc3QuYWRkKFwiY2FyZC1ib2R5XCIpO1xuICAgICAgY2FyZEJvZHkudmFsdWUgPSBkZXNjcmlwdGlvbjtcbiAgICAgIGNhcmQuYXBwZW5kQ2hpbGQoY2FyZEhlYWRlcik7XG4gICAgICBjYXJkLmFwcGVuZENoaWxkKGNhcmRCb2R5KTtcbiAgICB9XG4gICAgY29udGVudC5hcHBlbmRDaGlsZChjYXJkKTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVUYXNrTmF2QmFyID0gKGlkLCB0aXRsZSwgcHJpb3JpdHlJbikgPT4ge1xuICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YXNrRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFza1wiKTtcbiAgICB0YXNrRWxlbWVudC5pZCA9IGBuYXZUYXNrLSR7aWR9YDsgLy90YXNrLWlkXG4gICAge1xuICAgICAgY29uc3QgcHJpb3JpdHlJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHByaW9yaXR5SWNvbi5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHktaWNvblwiKTtcbiAgICAgIHN3aXRjaCAocHJpb3JpdHlJbikge1xuICAgICAgICBjYXNlIHByaW9yaXR5LkxPVy50ZXh0OiB7XG4gICAgICAgICAgcHJpb3JpdHlJY29uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHByaW9yaXR5LkxPVy5jb2xvcjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIHByaW9yaXR5Lk1FRElVTS50ZXh0OiB7XG4gICAgICAgICAgcHJpb3JpdHlJY29uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHByaW9yaXR5Lk1FRElVTS5jb2xvcjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIHByaW9yaXR5LkhJR0gudGV4dDoge1xuICAgICAgICAgIHByaW9yaXR5SWNvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwcmlvcml0eS5ISUdILmNvbG9yO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCB0YXNrTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB0YXNrTmFtZS5jbGFzc0xpc3QuYWRkKFwidGFzay1uYW1lXCIpO1xuICAgICAgdGFza05hbWUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgIHRhc2tFbGVtZW50LmFwcGVuZENoaWxkKHByaW9yaXR5SWNvbik7XG4gICAgICB0YXNrRWxlbWVudC5hcHBlbmRDaGlsZCh0YXNrTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiB0YXNrRWxlbWVudDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGNyZWF0ZVRhc2tOYXZCYXIsXG4gICAgY3JlYXRlVGFzayxcbiAgICBmb3JtUHJpb3JpdHlFbGVtZW50cyxcbiAgICBhZGRUb2RvRm9ybSxcbiAgICB0b2RvU3VibWl0QnRuLFxuICAgIGZvcm1EZXNjcmlwdGlvbkVsZW1lbnQsXG4gICAgZm9ybVRpdGxlRWxlbWVudCxcbiAgICBmb3JtUHJvamVjdEVsZW1lbnQsXG4gICAgY2xvc2VUYXNrSW5wdXRGb3JtLFxuICAgIGNyZWF0ZVRhc2ssXG4gICAgZ2V0VGFza3NCeVByb2plY3RJZCxcbiAgICBjb250ZW50LFxuICAgIGdldE5hdlRhc2tCeUlkLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgdGFza1VJIH07XG4iLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSBcIi4vVG9kb1wiO1xuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL1Byb2plY3RcIjtcbmltcG9ydCB7IE1haW5BcHAgfSBmcm9tIFwiLi9NYWluQXBwXCI7XG5pbXBvcnQgeyBwcm9qZWN0VUkgfSBmcm9tIFwiLi9wcm9qZWN0VUlcIjtcbmltcG9ydCB7IHRhc2tVSSB9IGZyb20gXCIuL3Rhc2tVSVwiO1xuXG5jb25zdCBtcCA9IG5ldyBNYWluQXBwKCk7XG5jb25zdCB0b2dnbGVUYXNrQnV0dG9uSW1hZ2UgPSBcIi4vaW1hZ2VzL2ljb25zOC1leHBhbmQtYXJyb3ctMTYucG5nXCI7XG5cbmNvbnN0IGFwcENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCBwcm9qZWN0ID0gKCgpID0+IHtcbiAgICBmdW5jdGlvbiBnZXROYW1lKCkge1xuICAgICAgcmV0dXJuIHByb2plY3RVSS5pbnB1dEVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRQcm9qZWN0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdFByb2plY3QgPSBuZXcgUHJvamVjdChcImRlZmF1bHRcIik7XG4gICAgICBkZWZhdWx0UHJvamVjdC5faWQgPSAwO1xuICAgICAgbXAuYWRkUHJvamVjdChkZWZhdWx0UHJvamVjdCk7XG4gICAgICBwcm9qZWN0VUkuY3JlYXRlUHJvamVjdFVJKGRlZmF1bHRQcm9qZWN0Lm5hbWUsIGRlZmF1bHRQcm9qZWN0LmlkKTtcbiAgICAgIGNvbnN0IHByb2plY3RMaUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtMFwiKTtcbiAgICAgIGNvbnN0IHByb2plY3RSb3cgPSBwcm9qZWN0TGlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1yb3dcIik7XG4gICAgICBwcm9qZWN0Um93LmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9qZWN0LXJvdy13aGl0ZXNwYWNlXCIpO1xuICAgIH07XG4gICAgZGVmYXVsdFByb2plY3QoKTtcbiAgICBmdW5jdGlvbiBhZGRQcm9qZWN0KG5hbWUpIHtcbiAgICAgIGxldCBwcm9qZWN0ID0gbmV3IFByb2plY3QobmFtZSk7XG4gICAgICBtcC5hZGRQcm9qZWN0KHByb2plY3QpO1xuICAgICAgcHJvamVjdFVJLmNyZWF0ZVByb2plY3RVSShwcm9qZWN0Lm5hbWUsIHByb2plY3QuaWQpO1xuICAgICAgcmV0dXJuIHByb2plY3QuaWQ7XG4gICAgfVxuICAgIHByb2plY3RVSS5hZGRQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBsZXQgbmFtZSA9IGdldE5hbWUoKTtcbiAgICAgIGxldCBpZCA9IGFkZFByb2plY3QobmFtZSk7XG4gICAgICBwcm9qZWN0VUkuY2xvc2VQcm9qZWN0SW5wdXROYW1lKCk7XG4gICAgICBwcm9qZWN0VUkuYWRkUHJvamVjdFRvVGFza0Zvcm0oaWQsIG5hbWUpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gZGVsZXRlUHJvamVjdChpZCkge1xuICAgICAgaWYgKGlkID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKG1wLnByb2plY3RMaXN0KTtcbiAgICAgIG1wLnJlbW92ZVByb2plY3QoaWQpO1xuICAgICAgcHJvamVjdFVJLnJlbW92ZVByb2plY3QoaWQpO1xuICAgICAgcHJvamVjdFVJLnJlbW92ZVByb2plY3RGcm9tVGFza0Zvcm0oaWQpO1xuICAgICAgbGV0IGFycmF5ID0gdGFza1VJLmdldFRhc2tzQnlQcm9qZWN0SWQoaWQpO1xuICAgICAgYXJyYXkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhtcC5wcm9qZWN0TGlzdCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQuZGF0YXNldC5pZCA9PT0gXCJyZW1vdmUtcHJvamVjdFwiKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RIZWFkZXIgPSBlLnRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCBwcm9qZWN0Um93ID0gcHJvamVjdEhlYWRlci5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCBsaSA9IHByb2plY3RSb3cucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgaWQgPSBsaS5pZC5zcGxpdChcIi1cIilbMV07XG4gICAgICAgIGRlbGV0ZVByb2plY3QocGFyc2VJbnQoaWQpKTtcbiAgICAgICAgLy9tb3JlIGNsZWFuIHdheSB3b3VsZCBiZSBoYXZpbmcgdGhlIHNhbWUgaWQgbnVtYmVyIGluIGRhdGEtaWQgYXMgdGhlIGxpIGlkXG4gICAgICB9XG4gICAgfVxuICAgIHByb2plY3RVSS5wcm9qZWN0V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlUHJvamVjdCk7XG5cbiAgICBmdW5jdGlvbiBzaG93UHJvamVjdFRhc2tzT25Db250ZW50KGUpIHtcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwcm9qZWN0LW5hbWVcIikpIHtcbiAgICAgICAgbGV0IHByb2plY3ROYW1lRWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICBsZXQgcHJvamVjdElkID0gcGFyc2VJbnQocHJvamVjdE5hbWVFbGVtZW50LmRhdGFzZXQuaWQuc3BsaXQoXCItXCIpWzFdKTtcbiAgICAgICAgbGV0IGNhcmRBcnJheSA9IHRhc2tVSS5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2FyZFwiKTtcbiAgICAgICAgY2FyZEFycmF5ID0gW1xuICAgICAgICAgIC4uLkFycmF5LmZyb20oY2FyZEFycmF5KS5tYXAoKGNhcmQpID0+XG4gICAgICAgICAgICBwYXJzZUludChjYXJkLmRhdGFzZXQucHJvamVjdCkgIT09IHByb2plY3RJZFxuICAgICAgICAgICAgICA/IGNhcmQuY2xhc3NMaXN0LmFkZChcImNhcmQtb2ZmXCIpXG4gICAgICAgICAgICAgIDogY2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZC1vZmZcIilcbiAgICAgICAgICApLFxuICAgICAgICBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHByb2plY3RVSS5wcm9qZWN0V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgc2hvd1Byb2plY3RUYXNrc09uQ29udGVudFxuICAgICk7XG4gIH0pKCk7XG5cbiAgY29uc3QgdGFza3MgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGFkZFRhc2socHJvamVjdElkLCB0YXNrTmFtZSwgdGFza0Rlc2NyLCB0YXNrUHJpbykge1xuICAgICAgbGV0IHRhc2sgPSBuZXcgVG9kbyh0YXNrTmFtZSwgdGFza0Rlc2NyLCB0YXNrUHJpbywgcHJvamVjdElkKTtcbiAgICAgIGNvbnNvbGUudGFibGUobXAucHJvamVjdExpc3QpO1xuICAgICAgbGV0IGFycmF5ID0gbXAucHJvamVjdExpc3Q7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhcnJheVtpXS5pZCA9PT0gcHJvamVjdElkKSB7XG4gICAgICAgICAgYXJyYXlbaV0uYWRkVG9kbyh0YXNrKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gVG9Ebyh0YXNrKTsgLy9yZWZlcmVuY2UgdG8gb2JqZWN0IGluc2lkZSB0aGUgYXJyYXlcbiAgICAgIGNvbnN0IHRhc2tET01OYXZFbGVtZW50ID0gdGFza1VJLmNyZWF0ZVRhc2tOYXZCYXIoXG4gICAgICAgIHRhc2suaWQsXG4gICAgICAgIHRhc2sudGl0bGUsXG4gICAgICAgIHRhc2sucHJpb3JpdHlcbiAgICAgICk7XG4gICAgICBjb25zdCB0YXNrV3JhcHBlciA9IHByb2plY3RVSS5nZXRUYXNrV3JhcHBlcihwcm9qZWN0SWQpO1xuICAgICAgdGFza1dyYXBwZXIuYXBwZW5kQ2hpbGQodGFza0RPTU5hdkVsZW1lbnQpO1xuICAgICAgdGFza1VJLmNyZWF0ZVRhc2soXG4gICAgICAgIHRhc2suaWQsXG4gICAgICAgIHByb2plY3RJZCxcbiAgICAgICAgdGFzay50aXRsZSxcbiAgICAgICAgdGFzay5kZXNjcmlwdGlvbixcbiAgICAgICAgdGFzay5wcmlvcml0eVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRUaXRsZSgpIHtcbiAgICAgIHJldHVybiB0YXNrVUkuZm9ybVRpdGxlRWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RGVzY3IoKSB7XG4gICAgICByZXR1cm4gdGFza1VJLmZvcm1EZXNjcmlwdGlvbkVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFByaW8oKSB7XG4gICAgICBsZXQgZWxlbWVudHMgPSB0YXNrVUkuZm9ybVByaW9yaXR5RWxlbWVudHM7XG4gICAgICBsZXQgY2hlY2tlZFZhbHVlO1xuICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoZWxlbWVudC5jaGVja2VkKSB7XG4gICAgICAgICAgY2hlY2tlZFZhbHVlID0gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gY2hlY2tlZFZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRQcm9qZWN0SWQoKSB7XG4gICAgICBsZXQgZWxlbWVudCA9IHRhc2tVSS5mb3JtUHJvamVjdEVsZW1lbnQ7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoZWxlbWVudC52YWx1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlQ2FyZChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnV0dG9uMlwiKSkge1xuICAgICAgICBsZXQgY2FyZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgbGV0IGNhcmRJZCA9IGNhcmQuaWQ7IC8vJ2NhcmQtJHtpZH0nXG4gICAgICAgIGxldCBwcm9qZWN0SWQgPSBwYXJzZUludChjYXJkLmRhdGFzZXQucHJvamVjdCk7XG4gICAgICAgIC8vZS50YXJnZXQucGFyZW50Tm9kZSwgaXMgb24gdGhlIGNvbnRlbnQsIHdlIG5lZWQgdG8gZGVsZXRlIHRoZSB0YXNrIGZyb20gdGhlIG5hdmJhciBhbHNvLCBhbmQgdXBkYXRlIHRoZSB0b2RvIGxpc3RcbiAgICAgICAgbGV0IHRhc2tJZCA9IHBhcnNlSW50KGNhcmRJZC5zcGxpdChcIi1cIilbMV0pO1xuICAgICAgICBjYXJkLnJlbW92ZSgpOyAvL2RlbGV0ZSB0YXNrIGZyb20gY29udGVudFxuICAgICAgICB0YXNrVUkuZ2V0TmF2VGFza0J5SWQodGFza0lkKS5yZW1vdmUoKTsgLy9kZWxldGUgdGFzayBmcm9tIHNpZGVuYXZcbiAgICAgICAgbGV0IHByb2plY3RPZlRhc2sgPSBtcC5nZXRQcm9qZWN0KHByb2plY3RJZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RPZlRhc2suX3RvZG9MaXN0KTtcbiAgICAgICAgcHJvamVjdE9mVGFzay5kZWxldGVUb2RvKHRhc2tJZCk7IC8vZGVsZXRlIHRhc2sgZnJvbSBwcm9qZWN0IHRvZG8gbGlzdFxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0T2ZUYXNrLl90b2RvTGlzdCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRhc2tVSS5jb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW1vdmVDYXJkKTtcbiAgICB0YXNrVUkuY29udGVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZC1ib2R5XCIpKSB7XG4gICAgICAgIGxldCBjYXJkQm9keSA9IGUudGFyZ2V0O1xuICAgICAgICBsZXQgY2FyZCA9IGUudGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgIGxldCBjYXJkSWQgPSBjYXJkLmlkO1xuICAgICAgICBsZXQgdGFza0lkID0gcGFyc2VJbnQoY2FyZElkLnNwbGl0KFwiLVwiKVsxXSk7XG4gICAgICAgIGxldCBwcm9qZWN0SWQgPSBwYXJzZUludChjYXJkLmRhdGFzZXQucHJvamVjdCk7XG4gICAgICAgIC8vd2UgbmVlZCB0byBzYXZlIHRoZSB0ZXh0IGZyb20gY2FyZGJvZHkgdG8gdGhlIHRvZG8gZGVzY3JpcHRpb25cbiAgICAgICAgbGV0IHRvZG9FbGVtZW50ID0gbXBcbiAgICAgICAgICAuZ2V0UHJvamVjdChwcm9qZWN0SWQpXG4gICAgICAgICAgLnRvZG9MaXN0LmZpbmQoKHRvZG8pID0+IHRvZG8uaWQgPT09IHRhc2tJZCk7XG4gICAgICAgIHRvZG9FbGVtZW50LmRlc2NyaXB0aW9uID0gY2FyZEJvZHkudmFsdWU7XG4gICAgICAgIGNvbnNvbGUubG9nKG1wLmdldFByb2plY3QocHJvamVjdElkKS50b2RvTGlzdCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0YXNrVUkuYWRkVG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgYWRkVGFzayhnZXRQcm9qZWN0SWQoKSwgZ2V0VGl0bGUoKSwgZ2V0RGVzY3IoKSwgZ2V0UHJpbygpKTtcbiAgICAgIHRhc2tVSS5jbG9zZVRhc2tJbnB1dEZvcm0oKTtcbiAgICB9KTtcbiAgfSkoKTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6IiJ9