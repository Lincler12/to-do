(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=function(){var n,r;function o(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e(this,"_title",void 0),e(this,"_description",void 0),e(this,"_duedate",void 0),e(this,"_priority",void 0),e(this,"_notes",void 0),e(this,"_checklist",void 0),e(this,"_id",void 0),this._id=o.id,o.id++,this._title=t,this._description=n,this._priority=r}return n=o,(r=[{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"description",get:function(){return this._description},set:function(t){this._description=t}},{key:"duedate",get:function(){return this._duedate},set:function(t){this._duedate=t}},{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"notes",get:function(){return this._notes},set:function(t){this._notes=t}},{key:"checklist",get:function(){return this._checklist},set:function(t){this._checklist=t}},{key:"id",get:function(){return this._id}}])&&t(n.prototype,r),o}();function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e(n,"id",1);var i=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"_todoList",[]),a(this,"_id",void 0),a(this,"_name",void 0),a(this,"addTodo",(function(t){n._todoList.push(t)})),this._id=t.id,t.id++,this._name=e}return o(t,[{key:"todoList",get:function(){return this._todoList}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}}]),o(t,[{key:"deleteTodo",value:function(t){for(var e=[],n=0;n<this._todoList.length;n++)!this._todoList[n].id===t&&e.push(this._todoList[n]);this._todoList=[].concat(e)}}]),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}a(i,"id",1);var s=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"_projectList",[]),d(this,"addProject",(function(t){e._projectList.push(t)})),d(this,"updateProjectName",(function(t,n){e._projectList.forEach((function(e){e.id===n&&(e.name=t)}))})),d(this,"removeProject",(function(t){e._projectList=e._projectList.filter((function(e){return e.id!==t}))}))}var e,n;return e=t,(n=[{key:"getProject",value:function(t){return this._projectList.find((function(e){return e.id===t}))}},{key:"projectList",get:function(){return this._projectList}}])&&c(e.prototype,n),t}(),l=function(){var t=document.getElementById("project-wrapper"),e=document.getElementById("project-form"),n=document.getElementById("project-name"),r=(document.getElementById("get-project-name"),document.getElementById("sidenav"));function o(e){var n=t.querySelectorAll("li");return Array.from(n).find((function(t){return t.id==="project-".concat(e)}))}return{createProjectUI:function(e,n){var o=document.createElement("li");o.id="project-".concat(n);var a=document.createElement("div");a.id="project-row",a.classList.add("project-row"),r.classList.contains("show-sidenav")||a.classList.add("project-row-whitespace");var i=document.createElement("div");i.classList.add("project-header");var c=document.createElement("img");c.classList.add("toggle-task-btn"),c.src="./images/icons8-expand-arrow-16.png";var d=document.createElement("button");d.classList.add("project-name"),d.dataset.id="projectName-".concat(n),d.textContent=e;var s=document.createElement("button");s.textContent="-",s.classList.add("remove-project"),s.dataset.id="remove-project",i.appendChild(c),i.appendChild(d),i.appendChild(s);var l=document.createElement("div");l.dataset.id="task-wrapper",l.classList.add("task-wrapper"),l.classList.add("task-wrapper-off"),a.appendChild(i),a.appendChild(l),o.appendChild(a),t.appendChild(o)},addProjectForm:e,inputElement:n,closeProjectInputName:function(){e.reset(),document.getElementById("get-project-name").classList.toggle("get-project-name-off")},removeProject:function(e){t.querySelectorAll("li").forEach((function(t){t.id==="project-".concat(e)&&t.remove()}))},projectWrapper:t,getProject:o,removeProjectFromTaskForm:function(t){document.getElementById("project-".concat(t)).remove()},addProjectToTaskForm:function(t,e){var n=document.getElementById("todo-form-projects"),r=document.createElement("option");r.value=t,r.id="project-".concat(t),r.textContent=e,n.appendChild(r)},getTaskWrapper:function(t){return o(t).querySelector('div[data-id="task-wrapper"]')}}}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"HIGH",get:function(){return{color:"#e53935",value:0,text:"high"}}},{key:"MEDIUM",get:function(){return{color:"#FFB300",value:1,text:"medium"}}},{key:"LOW",get:function(){return{color:"#43A047",value:2,text:"low"}}}],null&&u(e.prototype,null),n&&u(e,n),t}();function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f,v,h,y,g,j,b,k,E,L=(v=document.getElementsByClassName("content")[0],h=document.getElementById("todo-form"),y=document.getElementById("submit-todo"),g=document.getElementsByName("priority"),j=document.getElementById("todo-title"),b=document.getElementById("todo-description"),k=document.getElementById("todo-form-projects"),m(f={createTaskNavBar:function(t,e,n){var r=document.createElement("div");r.classList.add("task"),r.id="navTask-".concat(t);var o=document.createElement("div");switch(o.classList.add("priority-icon"),n){case p.LOW.text:o.style.backgroundColor=p.LOW.color;break;case p.MEDIUM.text:o.style.backgroundColor=p.MEDIUM.color;break;case p.HIGH.text:o.style.backgroundColor=p.HIGH.color}var a=document.createElement("div");return a.classList.add("task-name"),a.textContent=e,r.appendChild(o),r.appendChild(a),r},createTask:E=function(t,e,n,r,o){var a=document.createElement("div");a.classList.add("card"),a.id="card-".concat(t),a.dataset.project=e;var i=document.createElement("div");switch(i.classList.add("card-header"),o){case p.LOW.text:i.style.backgroundColor=p.LOW.color;break;case p.MEDIUM.text:i.style.backgroundColor=p.MEDIUM.color;break;case p.HIGH.text:i.style.backgroundColor=p.HIGH.color}var c=document.createElement("h4");c.textContent=n;var d=document.createElement("button");d.classList.add("button2"),d.textContent="-",i.appendChild(c),i.appendChild(d);var s=document.createElement("textarea");s.classList.add("card-body"),s.value=r,a.appendChild(i),a.appendChild(s),v.appendChild(a)},formPriorityElements:g,addTodoForm:h,todoSubmitBtn:y,formDescriptionElement:b,formTitleElement:j,formProjectElement:k,closeTaskInputForm:function(){h.reset(),document.getElementById("add-todo-modal").classList.toggle("add-todo-modal-off")}},"createTask",E),m(f,"getTasksByProjectId",(function(t){return document.querySelectorAll('div[data-project="'.concat(t,'"]'))})),m(f,"content",v),m(f,"getNavTaskById",(function(t){return document.getElementById("navTask-".concat(t))})),f);function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _=new s;!function(){var t,e=0;function r(){var t,n=L.content.querySelectorAll(".card");n=function(t){if(Array.isArray(t))return I(t)}(t=Array.from(n).map((function(t){return parseInt(t.dataset.project)!==e?t.classList.add("card-off"):t.classList.remove("card-off")})))||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t=new i("default"))._id=0,_.addProject(t),l.createProjectUI(t.name,t.id),document.getElementById("project-0").querySelector(".project-row").classList.remove("project-row-whitespace"),r(),l.addProjectForm.addEventListener("submit",(function(t){t.preventDefault();var e=l.inputElement.value,n=function(t){var e=new i(t);return _.addProject(e),l.createProjectUI(e.name,e.id),e.id}(e);l.closeProjectInputName(),l.addProjectToTaskForm(n,e)})),l.projectWrapper.addEventListener("click",(function(t){if("remove-project"===t.target.dataset.id){var e=t.target.parentNode.parentNode.parentNode.id.split("-")[1];!function(t){0!==t&&(console.log(_.projectList),_.removeProject(t),l.removeProject(t),l.removeProjectFromTaskForm(t),L.getTasksByProjectId(t).forEach((function(t){t.remove()})),console.log(_.projectList))}(parseInt(e))}})),l.projectWrapper.addEventListener("click",(function(t){if(t.target.classList.contains("project-name")){var n=t.target;e=parseInt(n.dataset.id.split("-")[1]),r()}})),L.content.addEventListener("click",(function(t){if(t.target.classList.contains("button2")){var e=t.target.parentNode.parentNode,n=e.id,r=parseInt(e.dataset.project),o=parseInt(n.split("-")[1]);e.remove(),L.getNavTaskById(o).remove();var a=_.getProject(r);console.log(a._todoList),a.deleteTodo(o),console.log(a._todoList)}})),L.content.addEventListener("change",(function(t){if(t.target.classList.contains("card-body")){var e=t.target,n=t.target.parentNode,r=n.id,o=parseInt(r.split("-")[1]),a=parseInt(n.dataset.project);_.getProject(a).todoList.find((function(t){return t.id===o})).description=e.value,console.log(_.getProject(a).todoList)}})),L.addTodoForm.addEventListener("submit",(function(t){var e,o;t.preventDefault(),function(t,e,o,a){var i=new n(e,o,a,t);console.table(_.projectList);for(var c=_.projectList,d=0;d<c.length;d++)if(c[d].id===t){c[d].addTodo(i);break}var s=L.createTaskNavBar(i.id,i.title,i.priority);l.getTaskWrapper(t).appendChild(s),L.createTask(i.id,t,i.title,i.description,i.priority),r()}((o=L.formProjectElement,parseInt(o.value)),L.formTitleElement.value,L.formDescriptionElement.value,(L.formPriorityElements.forEach((function(t){t.checked&&(e=t.value)})),e)),L.closeTaskInputForm()}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL1RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9Qcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvTWFpbkFwcC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3Byb2plY3RVSS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3ByaW9yaXR5RW51bS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3Rhc2tVSS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbIlRvZG8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJ0aGlzIiwiX2lkIiwiaWQiLCJfdGl0bGUiLCJfZGVzY3JpcHRpb24iLCJfcHJpb3JpdHkiLCJ2YWx1ZSIsIl9kdWVkYXRlIiwiX25vdGVzIiwiX2NoZWNrbGlzdCIsIlByb2plY3QiLCJuYW1lIiwidG9kbyIsIl90b2RvTGlzdCIsInB1c2giLCJfbmFtZSIsIm5ld0FycmF5IiwiaSIsImxlbmd0aCIsIk1haW5BcHAiLCJwcm9qZWN0IiwiX3Byb2plY3RMaXN0IiwiZm9yRWFjaCIsImZpbHRlciIsImZpbmQiLCJwcm9qZWN0VUkiLCJwcm9qZWN0V3JhcHBlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRQcm9qZWN0Rm9ybSIsImlucHV0RWxlbWVudCIsInNpZGVuYXYiLCJnZXRQcm9qZWN0IiwibGlFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJBcnJheSIsImZyb20iLCJsaUVsZW1lbnQiLCJjcmVhdGVQcm9qZWN0VUkiLCJsaSIsImNyZWF0ZUVsZW1lbnQiLCJwcm9qZWN0Um93IiwiY2xhc3NMaXN0IiwiYWRkIiwiY29udGFpbnMiLCJwcm9qZWN0SGVhZGVyIiwidG9nZ2xlVGFza0J0biIsInNyYyIsInByb2plY3ROYW1lIiwiZGF0YXNldCIsInRleHRDb250ZW50IiwicmVtb3ZlUHJvamVjdEJ0biIsImFwcGVuZENoaWxkIiwidGFza1dyYXBwZXIiLCJjbG9zZVByb2plY3RJbnB1dE5hbWUiLCJyZXNldCIsInRvZ2dsZSIsInJlbW92ZVByb2plY3QiLCJyZW1vdmUiLCJyZW1vdmVQcm9qZWN0RnJvbVRhc2tGb3JtIiwiYWRkUHJvamVjdFRvVGFza0Zvcm0iLCJ0b2RvRm9ybVByb2plY3QiLCJvcHRpb24iLCJnZXRUYXNrV3JhcHBlciIsInF1ZXJ5U2VsZWN0b3IiLCJjb2xvciIsInRleHQiLCJjb250ZW50IiwiYWRkVG9kb0Zvcm0iLCJ0b2RvU3VibWl0QnRuIiwiZm9ybVByaW9yaXR5RWxlbWVudHMiLCJmb3JtVGl0bGVFbGVtZW50IiwiZm9ybURlc2NyaXB0aW9uRWxlbWVudCIsImZvcm1Qcm9qZWN0RWxlbWVudCIsImNyZWF0ZVRhc2siLCJ0YXNrVUkiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJjcmVhdGVUYXNrTmF2QmFyIiwicHJpb3JpdHlJbiIsInRhc2tFbGVtZW50IiwicHJpb3JpdHlJY29uIiwiTE9XIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJNRURJVU0iLCJISUdIIiwidGFza05hbWUiLCJwcm9qZWN0SWQiLCJjYXJkIiwiY2FyZEhlYWRlciIsImg0IiwiZGVsZXRlVGFza0J0biIsImNhcmRCb2R5IiwiY2xvc2VUYXNrSW5wdXRGb3JtIiwibXAiLCJkZWZhdWx0UHJvamVjdCIsInNob3dQcm9qZWN0c1dpdGhJZCIsInNob3dUYXNrc09uQ29udGVudCIsImNhcmRBcnJheSIsIm1hcCIsInBhcnNlSW50IiwiYWRkUHJvamVjdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsInBhcmVudE5vZGUiLCJzcGxpdCIsImNvbnNvbGUiLCJsb2ciLCJwcm9qZWN0TGlzdCIsImdldFRhc2tzQnlQcm9qZWN0SWQiLCJlbGVtZW50IiwiZGVsZXRlUHJvamVjdCIsInByb2plY3ROYW1lRWxlbWVudCIsImNhcmRJZCIsInRhc2tJZCIsInByb2plY3RPZlRhc2siLCJkZWxldGVUb2RvIiwidG9kb0xpc3QiLCJjaGVja2VkVmFsdWUiLCJ0YXNrRGVzY3IiLCJ0YXNrUHJpbyIsInRhc2siLCJ0YWJsZSIsImFycmF5IiwiYWRkVG9kbyIsInRhc2tET01OYXZFbGVtZW50IiwiYWRkVGFzayIsImNoZWNrZWQiXSwibWFwcGluZ3MiOiJxVEFBTUEsRSxtQkFnREosV0FBWUMsRUFBT0MsRUFBYUMsSSw0RkFBVSw2TEFDeENDLEtBQUtDLElBQU1MLEVBQUtNLEdBQ2hCTixFQUFLTSxLQUNMRixLQUFLRyxPQUFTTixFQUNkRyxLQUFLSSxhQUFlTixFQUNwQkUsS0FBS0ssVUFBWU4sRSwyQ0FsRGpCLE9BQU9DLEtBQUtHLFEsYUFFSkcsR0FDUk4sS0FBS0csT0FBU0csSSxrQ0FJZCxPQUFPTixLQUFLSSxjLGFBRUVFLEdBQ2ROLEtBQUtJLGFBQWVFLEksOEJBSXBCLE9BQU9OLEtBQUtPLFUsYUFFRkQsR0FDVk4sS0FBS08sU0FBV0QsSSwrQkFJaEIsT0FBT04sS0FBS0ssVyxhQUVEQyxHQUNYTixLQUFLSyxVQUFZQyxJLDRCQUlqQixPQUFPTixLQUFLUSxRLGFBRUpGLEdBQ1JOLEtBQUtRLE9BQVNGLEksZ0NBSWQsT0FBT04sS0FBS1MsWSxhQUVBSCxHQUNaTixLQUFLUyxXQUFhSCxJLHlCQUtsQixPQUFPTixLQUFLQyxTLCtXQTlDVkwsRSxLQTJDUSxHLElDM0NSYyxFLFdBaUJKLFdBQVlDLEdBQU0sWSw0RkFBQSw0QkFmTixJQWVNLDhEQU1SLFNBQUNDLEdBQ1QsRUFBS0MsVUFBVUMsS0FBS0YsTUFOcEJaLEtBQUtDLElBQU1TLEVBQVFSLEdBQ25CUSxFQUFRUixLQUNSRixLQUFLZSxNQUFRSixFLDJDQWhCYixPQUFPWCxLQUFLYSxZLHlCQUlaLE9BQU9iLEtBQUtDLE0sMkJBSVosT0FBT0QsS0FBS2UsTyxhQUVMVCxHQUNQTixLQUFLZSxNQUFRVCxNLHNDQVlKSixHQUVULElBREEsSUFBSWMsRUFBVyxHQUNOQyxFQUFJLEVBQUdBLEVBQUlqQixLQUFLYSxVQUFVSyxPQUFR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SCxFQUFLNUgsVUFFUG1HLElBMERBOEIsRUF0Q0loQixFQUFVckMsRUFBT0YsbUJBQ2Q0QixTQUFTVyxFQUFRMUcsUUFqQmpCcUUsRUFBT0osaUJBQWlCakUsTUFHeEJxRSxFQUFPSCx1QkFBdUJsRSxPQUd0QnFFLEVBQU9MLHFCQUViaEQsU0FBUSxTQUFDMEYsR0FDWkEsRUFBUWlCLFVBQ1ZULEVBQWVSLEVBQVExRyxVQUdwQmtILElBMENQN0MsMEJBektpQixJIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUb2RvIHtcbiAgX3RpdGxlO1xuICBnZXQgdGl0bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpdGxlO1xuICB9XG4gIHNldCB0aXRsZSh2YWx1ZSkge1xuICAgIHRoaXMuX3RpdGxlID0gdmFsdWU7XG4gIH1cbiAgX2Rlc2NyaXB0aW9uO1xuICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xuICB9XG4gIHNldCBkZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdmFsdWU7XG4gIH1cbiAgX2R1ZWRhdGU7XG4gIGdldCBkdWVkYXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9kdWVkYXRlO1xuICB9XG4gIHNldCBkdWVkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5fZHVlZGF0ZSA9IHZhbHVlO1xuICB9XG4gIF9wcmlvcml0eTtcbiAgZ2V0IHByaW9yaXR5KCkge1xuICAgIHJldHVybiB0aGlzLl9wcmlvcml0eTtcbiAgfVxuICBzZXQgcHJpb3JpdHkodmFsdWUpIHtcbiAgICB0aGlzLl9wcmlvcml0eSA9IHZhbHVlO1xuICB9XG4gIF9ub3RlcztcbiAgZ2V0IG5vdGVzKCkge1xuICAgIHJldHVybiB0aGlzLl9ub3RlcztcbiAgfVxuICBzZXQgbm90ZXModmFsdWUpIHtcbiAgICB0aGlzLl9ub3RlcyA9IHZhbHVlO1xuICB9XG4gIF9jaGVja2xpc3Q7XG4gIGdldCBjaGVja2xpc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrbGlzdDtcbiAgfVxuICBzZXQgY2hlY2tsaXN0KHZhbHVlKSB7XG4gICAgdGhpcy5fY2hlY2tsaXN0ID0gdmFsdWU7XG4gIH1cbiAgc3RhdGljIGlkID0gMTtcbiAgX2lkO1xuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG4gIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHkpIHtcbiAgICB0aGlzLl9pZCA9IFRvZG8uaWQ7XG4gICAgVG9kby5pZCsrO1xuICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLl9wcmlvcml0eSA9IHByaW9yaXR5O1xuICB9XG59XG5cbmV4cG9ydCB7IFRvZG8gfTtcbiIsImNsYXNzIFByb2plY3Qge1xuICBzdGF0aWMgaWQgPSAxO1xuICBfdG9kb0xpc3QgPSBbXTtcbiAgZ2V0IHRvZG9MaXN0KCkge1xuICAgIHJldHVybiB0aGlzLl90b2RvTGlzdDtcbiAgfVxuICBfaWQ7XG4gIGdldCBpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faWQ7XG4gIH1cbiAgX25hbWU7XG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG4gIHNldCBuYW1lKHZhbHVlKSB7XG4gICAgdGhpcy5fbmFtZSA9IHZhbHVlO1xuICB9XG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICB0aGlzLl9pZCA9IFByb2plY3QuaWQ7XG4gICAgUHJvamVjdC5pZCsrO1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICB9XG5cbiAgYWRkVG9kbyA9ICh0b2RvKSA9PiB7XG4gICAgdGhpcy5fdG9kb0xpc3QucHVzaCh0b2RvKTtcbiAgfTtcblxuICBkZWxldGVUb2RvKGlkKSB7XG4gICAgbGV0IG5ld0FycmF5ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl90b2RvTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCF0aGlzLl90b2RvTGlzdFtpXS5pZCA9PT0gaWQpIHtcbiAgICAgICAgbmV3QXJyYXkucHVzaCh0aGlzLl90b2RvTGlzdFtpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3RvZG9MaXN0ID0gWy4uLm5ld0FycmF5XTtcbiAgfVxufVxuXG5leHBvcnQgeyBQcm9qZWN0IH07XG4iLCJjbGFzcyBNYWluQXBwIHtcbiAgX3Byb2plY3RMaXN0ID0gW107XG5cbiAgYWRkUHJvamVjdCA9IChwcm9qZWN0KSA9PiB7XG4gICAgdGhpcy5fcHJvamVjdExpc3QucHVzaChwcm9qZWN0KTtcbiAgfTtcblxuICBnZXRQcm9qZWN0KGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb2plY3RMaXN0LmZpbmQoKHByb2plY3QpID0+IHByb2plY3QuaWQgPT09IGlkKTtcbiAgfVxuXG4gIHVwZGF0ZVByb2plY3ROYW1lID0gKG5hbWUsIGlkKSA9PiB7XG4gICAgdGhpcy5fcHJvamVjdExpc3QuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgaWYgKHByb2plY3QuaWQgPT09IGlkKSB7XG4gICAgICAgIHByb2plY3QubmFtZSA9IG5hbWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmVtb3ZlUHJvamVjdCA9IChpZCkgPT4ge1xuICAgIHRoaXMuX3Byb2plY3RMaXN0ID0gdGhpcy5fcHJvamVjdExpc3QuZmlsdGVyKFxuICAgICAgKHByb2plY3QpID0+IHByb2plY3QuaWQgIT09IGlkXG4gICAgKTtcbiAgfTtcblxuICBnZXQgcHJvamVjdExpc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb2plY3RMaXN0O1xuICB9XG59XG5cbmV4cG9ydCB7IE1haW5BcHAgfTtcbiIsImNvbnN0IHByb2plY3RVSSA9ICgoKSA9PiB7XG4gIGNvbnN0IHByb2plY3RXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LXdyYXBwZXJcIik7XG4gIGNvbnN0IGFkZFByb2plY3RGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWZvcm1cIik7XG4gIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC1uYW1lXCIpO1xuICBjb25zdCBnZXRQcm9qZWN0TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2V0LXByb2plY3QtbmFtZVwiKTtcbiAgY29uc3Qgc2lkZW5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lkZW5hdlwiKTtcblxuICBmdW5jdGlvbiBjbG9zZVByb2plY3RJbnB1dE5hbWUoKSB7XG4gICAgYWRkUHJvamVjdEZvcm0ucmVzZXQoKTtcbiAgICBjb25zdCBnZXRQcm9qZWN0TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2V0LXByb2plY3QtbmFtZVwiKTtcbiAgICBnZXRQcm9qZWN0TmFtZS5jbGFzc0xpc3QudG9nZ2xlKFwiZ2V0LXByb2plY3QtbmFtZS1vZmZcIik7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0UHJvamVjdChpZCkge1xuICAgIGNvbnN0IGxpRWxlbWVudHMgPSBwcm9qZWN0V3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKFwibGlcIik7XG4gICAgbGV0IGZvdW5kRWxlbWVudDtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShsaUVsZW1lbnRzKS5maW5kKFxuICAgICAgKGxpRWxlbWVudCkgPT4gbGlFbGVtZW50LmlkID09PSBgcHJvamVjdC0ke2lkfWBcbiAgICApO1xuICB9XG4gIGZ1bmN0aW9uIGdldFRhc2tXcmFwcGVyKGlkKSB7XG4gICAgY29uc3QgbGlFbGVtZW50ID0gZ2V0UHJvamVjdChpZCk7XG4gICAgcmV0dXJuIGxpRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbZGF0YS1pZD1cInRhc2std3JhcHBlclwiXScpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdChpZCkge1xuICAgIGNvbnN0IGxpRWxlbWVudHMgPSBwcm9qZWN0V3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKFwibGlcIik7XG4gICAgbGlFbGVtZW50cy5mb3JFYWNoKChsaUVsZW1lbnQpID0+IHtcbiAgICAgIGlmIChsaUVsZW1lbnQuaWQgPT09IGBwcm9qZWN0LSR7aWR9YCkge1xuICAgICAgICBsaUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gY3JlYXRlUHJvamVjdFVJKG5hbWUsIGlkKSB7XG4gICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbGkuaWQgPSBgcHJvamVjdC0ke2lkfWA7XG4gICAge1xuICAgICAgY29uc3QgcHJvamVjdFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBwcm9qZWN0Um93LmlkID0gXCJwcm9qZWN0LXJvd1wiO1xuICAgICAgcHJvamVjdFJvdy5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1yb3dcIik7XG4gICAgICBpZiAoIXNpZGVuYXYuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvdy1zaWRlbmF2XCIpKSB7XG4gICAgICAgIHByb2plY3RSb3cuY2xhc3NMaXN0LmFkZChcInByb2plY3Qtcm93LXdoaXRlc3BhY2VcIik7XG4gICAgICB9XG4gICAgICB7XG4gICAgICAgIGNvbnN0IHByb2plY3RIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBwcm9qZWN0SGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LWhlYWRlclwiKTtcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHRvZ2dsZVRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICAgIHRvZ2dsZVRhc2tCdG4uY2xhc3NMaXN0LmFkZChcInRvZ2dsZS10YXNrLWJ0blwiKTtcbiAgICAgICAgICB0b2dnbGVUYXNrQnRuLnNyYyA9IFwiLi9pbWFnZXMvaWNvbnM4LWV4cGFuZC1hcnJvdy0xNi5wbmdcIjtcbiAgICAgICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgcHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZChcInByb2plY3QtbmFtZVwiKTtcbiAgICAgICAgICBwcm9qZWN0TmFtZS5kYXRhc2V0LmlkID0gYHByb2plY3ROYW1lLSR7aWR9YDtcbiAgICAgICAgICBwcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgICAgY29uc3QgcmVtb3ZlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgcmVtb3ZlUHJvamVjdEJ0bi50ZXh0Q29udGVudCA9IFwiLVwiO1xuICAgICAgICAgIHJlbW92ZVByb2plY3RCdG4uY2xhc3NMaXN0LmFkZChcInJlbW92ZS1wcm9qZWN0XCIpO1xuICAgICAgICAgIHJlbW92ZVByb2plY3RCdG4uZGF0YXNldC5pZCA9IFwicmVtb3ZlLXByb2plY3RcIjtcbiAgICAgICAgICBwcm9qZWN0SGVhZGVyLmFwcGVuZENoaWxkKHRvZ2dsZVRhc2tCdG4pO1xuICAgICAgICAgIHByb2plY3RIZWFkZXIuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpO1xuICAgICAgICAgIHByb2plY3RIZWFkZXIuYXBwZW5kQ2hpbGQocmVtb3ZlUHJvamVjdEJ0bik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJvamVjdFJvdy5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGVyKTtcbiAgICAgICAgY29uc3QgdGFza1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0YXNrV3JhcHBlci5kYXRhc2V0LmlkID0gXCJ0YXNrLXdyYXBwZXJcIjtcbiAgICAgICAgdGFza1dyYXBwZXIuY2xhc3NMaXN0LmFkZChcInRhc2std3JhcHBlclwiKTtcbiAgICAgICAgdGFza1dyYXBwZXIuY2xhc3NMaXN0LmFkZChcInRhc2std3JhcHBlci1vZmZcIik7XG4gICAgICAgIHtcbiAgICAgICAgICAvLyBjb25zdCB0YXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgLy8gdGFzay5jbGFzc0xpc3QuYWRkKCd0YXNrJyk7XG4gICAgICAgICAgLy8ge1xuICAgICAgICAgIC8vIFx0Y29uc3QgcHJpb3JpdHlJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgLy8gXHRwcmlvcml0eUljb24uY2xhc3NMaXN0LmFkZCgncHJpb3JpdHktaWNvbicpO1xuICAgICAgICAgIC8vIFx0Y29uc3QgdGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAvLyBcdHRhc2tOYW1lLmNsYXNzTGlzdC5hZGQoJ3Rhc2stbmFtZScpO1xuICAgICAgICAgIC8vIFx0dGFza05hbWUudGV4dENvbnRlbnQgPSdkbyB0aGUgYWZwZW9zZmonO1xuICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9qZWN0Um93LmFwcGVuZENoaWxkKHByb2plY3RIZWFkZXIpO1xuICAgICAgICBwcm9qZWN0Um93LmFwcGVuZENoaWxkKHRhc2tXcmFwcGVyKTtcbiAgICAgIH1cbiAgICAgIGxpLmFwcGVuZENoaWxkKHByb2plY3RSb3cpO1xuICAgIH1cbiAgICBwcm9qZWN0V3JhcHBlci5hcHBlbmRDaGlsZChsaSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRQcm9qZWN0VG9UYXNrRm9ybShpZCwgbmFtZSkge1xuICAgIGNvbnN0IHRvZG9Gb3JtUHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby1mb3JtLXByb2plY3RzXCIpO1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uLnZhbHVlID0gaWQ7XG4gICAgb3B0aW9uLmlkID0gYHByb2plY3QtJHtpZH1gO1xuICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdG9kb0Zvcm1Qcm9qZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVQcm9qZWN0RnJvbVRhc2tGb3JtKGlkKSB7XG4gICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwcm9qZWN0LSR7aWR9YCk7XG4gICAgb3B0aW9uRWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlUHJvamVjdFVJLFxuICAgIGFkZFByb2plY3RGb3JtLFxuICAgIGlucHV0RWxlbWVudCxcbiAgICBjbG9zZVByb2plY3RJbnB1dE5hbWUsXG4gICAgcmVtb3ZlUHJvamVjdCxcbiAgICBwcm9qZWN0V3JhcHBlcixcbiAgICBnZXRQcm9qZWN0LFxuICAgIHJlbW92ZVByb2plY3RGcm9tVGFza0Zvcm0sXG4gICAgYWRkUHJvamVjdFRvVGFza0Zvcm0sXG4gICAgZ2V0VGFza1dyYXBwZXIsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBwcm9qZWN0VUkgfTtcbiIsImNsYXNzIHByaW9yaXR5IHtcbiAgc3RhdGljIGdldCBISUdIKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2xvcjogXCIjZTUzOTM1XCIsIC8vcmVkaXNoXG4gICAgICB2YWx1ZTogMCxcbiAgICAgIHRleHQ6IFwiaGlnaFwiLFxuICAgIH07XG4gIH1cbiAgc3RhdGljIGdldCBNRURJVU0oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbG9yOiBcIiNGRkIzMDBcIiwgLy95ZWxsb3dpc2hcbiAgICAgIHZhbHVlOiAxLFxuICAgICAgdGV4dDogXCJtZWRpdW1cIixcbiAgICB9O1xuICB9XG4gIHN0YXRpYyBnZXQgTE9XKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2xvcjogXCIjNDNBMDQ3XCIsIC8vZ3JlZW5pc2hcbiAgICAgIHZhbHVlOiAyLFxuICAgICAgdGV4dDogXCJsb3dcIixcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCB7IHByaW9yaXR5IH07XG4iLCJpbXBvcnQgeyBwcmlvcml0eSB9IGZyb20gXCIuL3ByaW9yaXR5RW51bVwiO1xuY29uc3QgdGFza1VJID0gKCgpID0+IHtcbiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb250ZW50XCIpWzBdO1xuICBjb25zdCBhZGRUb2RvRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby1mb3JtXCIpO1xuICBjb25zdCB0b2RvU3VibWl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtdG9kb1wiKTtcbiAgY29uc3QgZm9ybVByaW9yaXR5RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShcInByaW9yaXR5XCIpO1xuICBjb25zdCBmb3JtVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvLXRpdGxlXCIpO1xuICBjb25zdCBmb3JtRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvLWRlc2NyaXB0aW9uXCIpO1xuICBjb25zdCBmb3JtUHJvamVjdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG8tZm9ybS1wcm9qZWN0c1wiKTtcblxuICBmdW5jdGlvbiBjbG9zZVRhc2tJbnB1dEZvcm0oKSB7XG4gICAgYWRkVG9kb0Zvcm0ucmVzZXQoKTtcbiAgICBjb25zdCB0b2RvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC10b2RvLW1vZGFsXCIpO1xuICAgIHRvZG9Nb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiYWRkLXRvZG8tbW9kYWwtb2ZmXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VGFza3NCeVByb2plY3RJZChwcm9qZWN0SWQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgZGl2W2RhdGEtcHJvamVjdD1cIiR7cHJvamVjdElkfVwiXWApO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VGFza0J5SWQoaWQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGNhcmQtJHtpZH1gKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE5hdlRhc2tCeUlkKGlkKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBuYXZUYXNrLSR7aWR9YCk7XG4gIH1cblxuICBjb25zdCBjcmVhdGVUYXNrID0gKGlkLCBwcm9qZWN0SWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHlJbikgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNhcmQuY2xhc3NMaXN0LmFkZChcImNhcmRcIik7XG4gICAgY2FyZC5pZCA9IGBjYXJkLSR7aWR9YDtcbiAgICBjYXJkLmRhdGFzZXQucHJvamVjdCA9IHByb2plY3RJZDsgLy9pdCB3aWxsIHdvcmsgYXMgYSBmaWx0ZXJcbiAgICB7XG4gICAgICBjb25zdCBjYXJkSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNhcmRIZWFkZXIuY2xhc3NMaXN0LmFkZChcImNhcmQtaGVhZGVyXCIpO1xuXG4gICAgICBzd2l0Y2ggKHByaW9yaXR5SW4pIHtcbiAgICAgICAgY2FzZSBwcmlvcml0eS5MT1cudGV4dDoge1xuICAgICAgICAgIGNhcmRIZWFkZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcHJpb3JpdHkuTE9XLmNvbG9yO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgcHJpb3JpdHkuTUVESVVNLnRleHQ6IHtcbiAgICAgICAgICBjYXJkSGVhZGVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHByaW9yaXR5Lk1FRElVTS5jb2xvcjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIHByaW9yaXR5LkhJR0gudGV4dDoge1xuICAgICAgICAgIGNhcmRIZWFkZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcHJpb3JpdHkuSElHSC5jb2xvcjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB7XG4gICAgICAgIGNvbnN0IGg0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImg0XCIpO1xuICAgICAgICBoNC50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICBjb25zdCBkZWxldGVUYXNrQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgZGVsZXRlVGFza0J0bi5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uMlwiKTtcbiAgICAgICAgZGVsZXRlVGFza0J0bi50ZXh0Q29udGVudCA9IFwiLVwiO1xuICAgICAgICBjYXJkSGVhZGVyLmFwcGVuZENoaWxkKGg0KTtcbiAgICAgICAgY2FyZEhlYWRlci5hcHBlbmRDaGlsZChkZWxldGVUYXNrQnRuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNhcmRCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgICAgY2FyZEJvZHkuY2xhc3NMaXN0LmFkZChcImNhcmQtYm9keVwiKTtcbiAgICAgIGNhcmRCb2R5LnZhbHVlID0gZGVzY3JpcHRpb247XG4gICAgICBjYXJkLmFwcGVuZENoaWxkKGNhcmRIZWFkZXIpO1xuICAgICAgY2FyZC5hcHBlbmRDaGlsZChjYXJkQm9keSk7XG4gICAgfVxuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY2FyZCk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlVGFza05hdkJhciA9IChpZCwgdGl0bGUsIHByaW9yaXR5SW4pID0+IHtcbiAgICBjb25zdCB0YXNrRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRhc2tcIik7XG4gICAgdGFza0VsZW1lbnQuaWQgPSBgbmF2VGFzay0ke2lkfWA7IC8vdGFzay1pZFxuICAgIHtcbiAgICAgIGNvbnN0IHByaW9yaXR5SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBwcmlvcml0eUljb24uY2xhc3NMaXN0LmFkZChcInByaW9yaXR5LWljb25cIik7XG4gICAgICBzd2l0Y2ggKHByaW9yaXR5SW4pIHtcbiAgICAgICAgY2FzZSBwcmlvcml0eS5MT1cudGV4dDoge1xuICAgICAgICAgIHByaW9yaXR5SWNvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwcmlvcml0eS5MT1cuY29sb3I7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBwcmlvcml0eS5NRURJVU0udGV4dDoge1xuICAgICAgICAgIHByaW9yaXR5SWNvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwcmlvcml0eS5NRURJVU0uY29sb3I7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBwcmlvcml0eS5ISUdILnRleHQ6IHtcbiAgICAgICAgICBwcmlvcml0eUljb24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcHJpb3JpdHkuSElHSC5jb2xvcjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgdGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgdGFza05hbWUuY2xhc3NMaXN0LmFkZChcInRhc2stbmFtZVwiKTtcbiAgICAgIHRhc2tOYW1lLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICB0YXNrRWxlbWVudC5hcHBlbmRDaGlsZChwcmlvcml0eUljb24pO1xuICAgICAgdGFza0VsZW1lbnQuYXBwZW5kQ2hpbGQodGFza05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGFza0VsZW1lbnQ7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVUYXNrTmF2QmFyLFxuICAgIGNyZWF0ZVRhc2ssXG4gICAgZm9ybVByaW9yaXR5RWxlbWVudHMsXG4gICAgYWRkVG9kb0Zvcm0sXG4gICAgdG9kb1N1Ym1pdEJ0bixcbiAgICBmb3JtRGVzY3JpcHRpb25FbGVtZW50LFxuICAgIGZvcm1UaXRsZUVsZW1lbnQsXG4gICAgZm9ybVByb2plY3RFbGVtZW50LFxuICAgIGNsb3NlVGFza0lucHV0Rm9ybSxcbiAgICBjcmVhdGVUYXNrLFxuICAgIGdldFRhc2tzQnlQcm9qZWN0SWQsXG4gICAgY29udGVudCxcbiAgICBnZXROYXZUYXNrQnlJZCxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IHRhc2tVSSB9O1xuIiwiaW1wb3J0IHsgVG9kbyB9IGZyb20gXCIuL1RvZG9cIjtcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9Qcm9qZWN0XCI7XG5pbXBvcnQgeyBNYWluQXBwIH0gZnJvbSBcIi4vTWFpbkFwcFwiO1xuaW1wb3J0IHsgcHJvamVjdFVJIH0gZnJvbSBcIi4vcHJvamVjdFVJXCI7XG5pbXBvcnQgeyB0YXNrVUkgfSBmcm9tIFwiLi90YXNrVUlcIjtcblxuY29uc3QgbXAgPSBuZXcgTWFpbkFwcCgpO1xuY29uc3QgdG9nZ2xlVGFza0J1dHRvbkltYWdlID0gXCIuL2ltYWdlcy9pY29uczgtZXhwYW5kLWFycm93LTE2LnBuZ1wiO1xuXG5jb25zdCBhcHBDb250cm9sbGVyID0gKCgpID0+IHtcbiAgbGV0IHNob3dQcm9qZWN0c1dpdGhJZCA9IDA7XG4gIGZ1bmN0aW9uIHNob3dUYXNrc09uQ29udGVudCgpIHtcbiAgICBsZXQgY2FyZEFycmF5ID0gdGFza1VJLmNvbnRlbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJkXCIpO1xuICAgIGNhcmRBcnJheSA9IFtcbiAgICAgIC4uLkFycmF5LmZyb20oY2FyZEFycmF5KS5tYXAoKGNhcmQpID0+XG4gICAgICAgIHBhcnNlSW50KGNhcmQuZGF0YXNldC5wcm9qZWN0KSAhPT0gc2hvd1Byb2plY3RzV2l0aElkXG4gICAgICAgICAgPyBjYXJkLmNsYXNzTGlzdC5hZGQoXCJjYXJkLW9mZlwiKVxuICAgICAgICAgIDogY2FyZC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZC1vZmZcIilcbiAgICAgICksXG4gICAgXTtcbiAgfVxuICBjb25zdCBwcm9qZWN0ID0gKCgpID0+IHtcbiAgICBmdW5jdGlvbiBnZXROYW1lKCkge1xuICAgICAgcmV0dXJuIHByb2plY3RVSS5pbnB1dEVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRQcm9qZWN0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdFByb2plY3QgPSBuZXcgUHJvamVjdChcImRlZmF1bHRcIik7XG4gICAgICBkZWZhdWx0UHJvamVjdC5faWQgPSAwO1xuICAgICAgbXAuYWRkUHJvamVjdChkZWZhdWx0UHJvamVjdCk7XG4gICAgICBwcm9qZWN0VUkuY3JlYXRlUHJvamVjdFVJKGRlZmF1bHRQcm9qZWN0Lm5hbWUsIGRlZmF1bHRQcm9qZWN0LmlkKTtcbiAgICAgIGNvbnN0IHByb2plY3RMaUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtMFwiKTtcbiAgICAgIGNvbnN0IHByb2plY3RSb3cgPSBwcm9qZWN0TGlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1yb3dcIik7XG4gICAgICBwcm9qZWN0Um93LmNsYXNzTGlzdC5yZW1vdmUoXCJwcm9qZWN0LXJvdy13aGl0ZXNwYWNlXCIpO1xuICAgICAgc2hvd1Rhc2tzT25Db250ZW50KCk7XG4gICAgfTtcbiAgICBkZWZhdWx0UHJvamVjdCgpO1xuICAgIGZ1bmN0aW9uIGFkZFByb2plY3QobmFtZSkge1xuICAgICAgbGV0IHByb2plY3QgPSBuZXcgUHJvamVjdChuYW1lKTtcbiAgICAgIG1wLmFkZFByb2plY3QocHJvamVjdCk7XG4gICAgICBwcm9qZWN0VUkuY3JlYXRlUHJvamVjdFVJKHByb2plY3QubmFtZSwgcHJvamVjdC5pZCk7XG4gICAgICByZXR1cm4gcHJvamVjdC5pZDtcbiAgICB9XG4gICAgcHJvamVjdFVJLmFkZFByb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGxldCBuYW1lID0gZ2V0TmFtZSgpO1xuICAgICAgbGV0IGlkID0gYWRkUHJvamVjdChuYW1lKTtcbiAgICAgIHByb2plY3RVSS5jbG9zZVByb2plY3RJbnB1dE5hbWUoKTtcbiAgICAgIHByb2plY3RVSS5hZGRQcm9qZWN0VG9UYXNrRm9ybShpZCwgbmFtZSk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBkZWxldGVQcm9qZWN0KGlkKSB7XG4gICAgICBpZiAoaWQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2cobXAucHJvamVjdExpc3QpO1xuICAgICAgbXAucmVtb3ZlUHJvamVjdChpZCk7XG4gICAgICBwcm9qZWN0VUkucmVtb3ZlUHJvamVjdChpZCk7XG4gICAgICBwcm9qZWN0VUkucmVtb3ZlUHJvamVjdEZyb21UYXNrRm9ybShpZCk7XG4gICAgICBsZXQgYXJyYXkgPSB0YXNrVUkuZ2V0VGFza3NCeVByb2plY3RJZChpZCk7XG4gICAgICBhcnJheS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgIGNvbnNvbGUubG9nKG1wLnByb2plY3RMaXN0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVQcm9qZWN0KGUpIHtcbiAgICAgIGlmIChlLnRhcmdldC5kYXRhc2V0LmlkID09PSBcInJlbW92ZS1wcm9qZWN0XCIpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdEhlYWRlciA9IGUudGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IHByb2plY3RSb3cgPSBwcm9qZWN0SGVhZGVyLnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IGxpID0gcHJvamVjdFJvdy5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCBpZCA9IGxpLmlkLnNwbGl0KFwiLVwiKVsxXTtcbiAgICAgICAgZGVsZXRlUHJvamVjdChwYXJzZUludChpZCkpO1xuICAgICAgICAvL21vcmUgY2xlYW4gd2F5IHdvdWxkIGJlIGhhdmluZyB0aGUgc2FtZSBpZCBudW1iZXIgaW4gZGF0YS1pZCBhcyB0aGUgbGkgaWRcbiAgICAgIH1cbiAgICB9XG4gICAgcHJvamVjdFVJLnByb2plY3RXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW1vdmVQcm9qZWN0KTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNob3dQcm9qZWN0c09uQ29udGVudChlKSB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJvamVjdC1uYW1lXCIpKSB7XG4gICAgICAgIGxldCBwcm9qZWN0TmFtZUVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgc2hvd1Byb2plY3RzV2l0aElkID0gcGFyc2VJbnQoXG4gICAgICAgICAgcHJvamVjdE5hbWVFbGVtZW50LmRhdGFzZXQuaWQuc3BsaXQoXCItXCIpWzFdXG4gICAgICAgICk7XG4gICAgICAgIHNob3dUYXNrc09uQ29udGVudCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHByb2plY3RVSS5wcm9qZWN0V3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdXBkYXRlU2hvd1Byb2plY3RzT25Db250ZW50XG4gICAgKTtcbiAgfSkoKTtcblxuICBjb25zdCB0YXNrcyA9ICgoKSA9PiB7XG4gICAgZnVuY3Rpb24gYWRkVGFzayhwcm9qZWN0SWQsIHRhc2tOYW1lLCB0YXNrRGVzY3IsIHRhc2tQcmlvKSB7XG4gICAgICBsZXQgdGFzayA9IG5ldyBUb2RvKHRhc2tOYW1lLCB0YXNrRGVzY3IsIHRhc2tQcmlvLCBwcm9qZWN0SWQpO1xuICAgICAgY29uc29sZS50YWJsZShtcC5wcm9qZWN0TGlzdCk7XG4gICAgICBsZXQgYXJyYXkgPSBtcC5wcm9qZWN0TGlzdDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFycmF5W2ldLmlkID09PSBwcm9qZWN0SWQpIHtcbiAgICAgICAgICBhcnJheVtpXS5hZGRUb2RvKHRhc2spO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBUb0RvKHRhc2spOyAvL3JlZmVyZW5jZSB0byBvYmplY3QgaW5zaWRlIHRoZSBhcnJheVxuICAgICAgY29uc3QgdGFza0RPTU5hdkVsZW1lbnQgPSB0YXNrVUkuY3JlYXRlVGFza05hdkJhcihcbiAgICAgICAgdGFzay5pZCxcbiAgICAgICAgdGFzay50aXRsZSxcbiAgICAgICAgdGFzay5wcmlvcml0eVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRhc2tXcmFwcGVyID0gcHJvamVjdFVJLmdldFRhc2tXcmFwcGVyKHByb2plY3RJZCk7XG4gICAgICB0YXNrV3JhcHBlci5hcHBlbmRDaGlsZCh0YXNrRE9NTmF2RWxlbWVudCk7XG4gICAgICB0YXNrVUkuY3JlYXRlVGFzayhcbiAgICAgICAgdGFzay5pZCxcbiAgICAgICAgcHJvamVjdElkLFxuICAgICAgICB0YXNrLnRpdGxlLFxuICAgICAgICB0YXNrLmRlc2NyaXB0aW9uLFxuICAgICAgICB0YXNrLnByaW9yaXR5XG4gICAgICApO1xuICAgICAgc2hvd1Rhc2tzT25Db250ZW50KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VGl0bGUoKSB7XG4gICAgICByZXR1cm4gdGFza1VJLmZvcm1UaXRsZUVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldERlc2NyKCkge1xuICAgICAgcmV0dXJuIHRhc2tVSS5mb3JtRGVzY3JpcHRpb25FbGVtZW50LnZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRQcmlvKCkge1xuICAgICAgbGV0IGVsZW1lbnRzID0gdGFza1VJLmZvcm1Qcmlvcml0eUVsZW1lbnRzO1xuICAgICAgbGV0IGNoZWNrZWRWYWx1ZTtcbiAgICAgIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgaWYgKGVsZW1lbnQuY2hlY2tlZCkge1xuICAgICAgICAgIGNoZWNrZWRWYWx1ZSA9IGVsZW1lbnQudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNoZWNrZWRWYWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0UHJvamVjdElkKCkge1xuICAgICAgbGV0IGVsZW1lbnQgPSB0YXNrVUkuZm9ybVByb2plY3RFbGVtZW50O1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGVsZW1lbnQudmFsdWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUNhcmQoZSkge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImJ1dHRvbjJcIikpIHtcbiAgICAgICAgbGV0IGNhcmQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIGxldCBjYXJkSWQgPSBjYXJkLmlkOyAvLydjYXJkLSR7aWR9J1xuICAgICAgICBsZXQgcHJvamVjdElkID0gcGFyc2VJbnQoY2FyZC5kYXRhc2V0LnByb2plY3QpO1xuICAgICAgICAvL2UudGFyZ2V0LnBhcmVudE5vZGUsIGlzIG9uIHRoZSBjb250ZW50LCB3ZSBuZWVkIHRvIGRlbGV0ZSB0aGUgdGFzayBmcm9tIHRoZSBuYXZiYXIgYWxzbywgYW5kIHVwZGF0ZSB0aGUgdG9kbyBsaXN0XG4gICAgICAgIGxldCB0YXNrSWQgPSBwYXJzZUludChjYXJkSWQuc3BsaXQoXCItXCIpWzFdKTtcbiAgICAgICAgY2FyZC5yZW1vdmUoKTsgLy9kZWxldGUgdGFzayBmcm9tIGNvbnRlbnRcbiAgICAgICAgdGFza1VJLmdldE5hdlRhc2tCeUlkKHRhc2tJZCkucmVtb3ZlKCk7IC8vZGVsZXRlIHRhc2sgZnJvbSBzaWRlbmF2XG4gICAgICAgIGxldCBwcm9qZWN0T2ZUYXNrID0gbXAuZ2V0UHJvamVjdChwcm9qZWN0SWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0T2ZUYXNrLl90b2RvTGlzdCk7XG4gICAgICAgIHByb2plY3RPZlRhc2suZGVsZXRlVG9kbyh0YXNrSWQpOyAvL2RlbGV0ZSB0YXNrIGZyb20gcHJvamVjdCB0b2RvIGxpc3RcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdE9mVGFzay5fdG9kb0xpc3QpO1xuICAgICAgfVxuICAgIH1cbiAgICB0YXNrVUkuY29udGVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlQ2FyZCk7XG4gICAgdGFza1VJLmNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNhcmQtYm9keVwiKSkge1xuICAgICAgICBsZXQgY2FyZEJvZHkgPSBlLnRhcmdldDtcbiAgICAgICAgbGV0IGNhcmQgPSBlLnRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICBsZXQgY2FyZElkID0gY2FyZC5pZDtcbiAgICAgICAgbGV0IHRhc2tJZCA9IHBhcnNlSW50KGNhcmRJZC5zcGxpdChcIi1cIilbMV0pO1xuICAgICAgICBsZXQgcHJvamVjdElkID0gcGFyc2VJbnQoY2FyZC5kYXRhc2V0LnByb2plY3QpO1xuICAgICAgICAvL3dlIG5lZWQgdG8gc2F2ZSB0aGUgdGV4dCBmcm9tIGNhcmRib2R5IHRvIHRoZSB0b2RvIGRlc2NyaXB0aW9uXG4gICAgICAgIGxldCB0b2RvRWxlbWVudCA9IG1wXG4gICAgICAgICAgLmdldFByb2plY3QocHJvamVjdElkKVxuICAgICAgICAgIC50b2RvTGlzdC5maW5kKCh0b2RvKSA9PiB0b2RvLmlkID09PSB0YXNrSWQpO1xuICAgICAgICB0b2RvRWxlbWVudC5kZXNjcmlwdGlvbiA9IGNhcmRCb2R5LnZhbHVlO1xuICAgICAgICBjb25zb2xlLmxvZyhtcC5nZXRQcm9qZWN0KHByb2plY3RJZCkudG9kb0xpc3QpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGFza1VJLmFkZFRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGFkZFRhc2soZ2V0UHJvamVjdElkKCksIGdldFRpdGxlKCksIGdldERlc2NyKCksIGdldFByaW8oKSk7XG4gICAgICB0YXNrVUkuY2xvc2VUYXNrSW5wdXRGb3JtKCk7XG4gICAgfSk7XG4gIH0pKCk7XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==