(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){var n,o;function r(e,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t(this,"_title",void 0),t(this,"_description",void 0),t(this,"_duedate",void 0),t(this,"_priority",void 0),t(this,"_notes",void 0),t(this,"_checklist",void 0),this._id=r.id,r.id++,this._title=e,this._description=n,this._priority=o}return n=r,(o=[{key:"title",get:function(){return this._title},set:function(e){this._title=e}},{key:"description",get:function(){return this._description},set:function(e){this._description=e}},{key:"duedate",get:function(){return this._duedate},set:function(e){this._duedate=e}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority=e}},{key:"notes",get:function(){return this._notes},set:function(e){this._notes=e}},{key:"checklist",get:function(){return this._checklist},set:function(e){this._checklist=e}}])&&e(n.prototype,o),r}();function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t(n,"id",1);var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_todoList",[]),i(this,"_id",void 0),i(this,"_name",void 0),this._id=e.id,e.id++,this._name=t}return r(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}}]),r(e,[{key:"deleteTodo",value:function(){}}]),e}();function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i(c,"id",1);var s,u,l,m,p,f,h,v,j=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_projectList",[]),d(this,"addProject",(function(e){t._projectList.push(e)})),d(this,"updateProjectName",(function(e,n){t._projectList.forEach((function(t){t.id===n&&(t.name=e)}))})),d(this,"removeProject",(function(e){t._projectList=t._projectList.filter((function(t){return t.id!==e}))}))}var t,n;return t=e,(n=[{key:"projectList",get:function(){return this._projectList}}])&&a(t.prototype,n),e}(),y=(s=document.getElementById("project-wrapper"),u=document.getElementById("project-form"),l=document.getElementById("project-name"),document.getElementById("get-project-name"),m=document.getElementById("sidenav"),{createProjectUI:function(e,t){var n=document.createElement("li");n.id="project-".concat(t);var o=document.createElement("div");o.id="project-row",o.classList.add("project-row"),m.classList.contains("show-sidenav")||o.classList.add("project-row-whitespace");var r=document.createElement("div");r.classList.add("project-header");var i=document.createElement("img");i.classList.add("toggle-task-btn"),i.src="./images/icons8-expand-arrow-16.png";var c=document.createElement("button");c.dataset.id="project-name",c.textContent=e;var a=document.createElement("button");a.textContent="-",a.classList.add("remove-project"),a.dataset.id="remove-project",r.appendChild(i),r.appendChild(c),r.appendChild(a);var d=document.createElement("div");d.dataset.id="task-wrapper",d.classList.add("task-wrapper"),d.classList.add("task-wrapper-off"),o.appendChild(r),o.appendChild(d),n.appendChild(o),s.appendChild(n)},addProjectForm:u,inputElement:l,closeProjectInputName:function(){u.reset(),document.getElementById("get-project-name").classList.toggle("get-project-name-off")},removeProject:function(e){s.querySelectorAll("li").forEach((function(t){t.id==="project-".concat(e)&&t.remove()}))},projectWrapper:s,getProject:function(e){s.querySelectorAll("li").forEach((function(t){if(t.id==="project-".concat(e))return t}))},removeProjectFromTaskForm:function(e){document.getElementById("project-".concat(e)).remove()},addProjectToTaskForm:function(e,t){var n=document.getElementById("todo-form-projects"),o=document.createElement("option");o.value=e,o.id="project-".concat(e),o.textContent=t,n.appendChild(o)}}),g=(p=document.getElementsByClassName("content")[0],f=document.getElementById("todo-form"),h=document.getElementById("submit-todo"),{createTask:function(e,t,n,o){var r=document.createElement("div");r.classList.add("card"),r.id="card-".concat(e);var i=document.createElement("div");i.classList.add("card-header");var c=document.createElement("h4");c.textContent=t;var a=document.createElement("button");a.classList.add("button2"),i.appendChild(c),i.appendChild(a),document.createElement("textarea").classList.add("card-body"),p.appendChild(r)},addTodoForm:f,todoTitleElement:document.getElementById("todo-title"),todoDescriptionElement:document.getElementById("todo-description"),priorityElements:document.getElementsByName("priority"),todoSubmitBtn:h}),E=new j;(v=new c("default"))._id=0,E.addProject(v),y.createProjectUI(v.name,v.id),document.getElementById("project-0").querySelector(".project-row").classList.remove("project-row-whitespace"),y.addProjectForm.addEventListener("submit",(function(e){e.preventDefault();var t=y.inputElement.value,n=function(e){var t=new c(e);return E.addProject(t),y.createProjectUI(t.name,t.id),t.id}(t);y.closeProjectInputName(),y.addProjectToTaskForm(n,t)})),y.projectWrapper.addEventListener("click",(function(e){if("remove-project"===e.target.dataset.id){var t=e.target.parentNode.parentNode.parentNode.id.split("-")[1];!function(e){0!==e&&(console.log(E.projectList),E.removeProject(e),y.removeProject(e),y.removeProjectFromTaskForm(e),console.log(E.projectList))}(parseInt(t))}})),g.addTodoForm.addEventListener("submit",(function(e){e.preventDefault();var t=getName();addProject(t),y.closeProjectInputName()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL1RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9Qcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvcHJvamVjdFVJLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdGFza1VJLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9NYWluQXBwLmpzIl0sIm5hbWVzIjpbIlRvZG8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJ0aGlzIiwiX2lkIiwiaWQiLCJfdGl0bGUiLCJfZGVzY3JpcHRpb24iLCJfcHJpb3JpdHkiLCJ2YWx1ZSIsIl9kdWVkYXRlIiwiX25vdGVzIiwiX2NoZWNrbGlzdCIsIlByb2plY3QiLCJuYW1lIiwiX25hbWUiLCJwcm9qZWN0V3JhcHBlciIsImFkZFByb2plY3RGb3JtIiwiaW5wdXRFbGVtZW50Iiwic2lkZW5hdiIsImNvbnRlbnQiLCJhZGRUb2RvRm9ybSIsInRvZG9TdWJtaXRCdG4iLCJkZWZhdWx0UHJvamVjdCIsIk1haW5BcHAiLCJwcm9qZWN0IiwiX3Byb2plY3RMaXN0IiwicHVzaCIsImZvckVhY2giLCJmaWx0ZXIiLCJwcm9qZWN0VUkiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlUHJvamVjdFVJIiwibGkiLCJjcmVhdGVFbGVtZW50IiwicHJvamVjdFJvdyIsImNsYXNzTGlzdCIsImFkZCIsImNvbnRhaW5zIiwicHJvamVjdEhlYWRlciIsInRvZ2dsZVRhc2tCdG4iLCJzcmMiLCJwcm9qZWN0TmFtZSIsImRhdGFzZXQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZVByb2plY3RCdG4iLCJhcHBlbmRDaGlsZCIsInRhc2tXcmFwcGVyIiwiY2xvc2VQcm9qZWN0SW5wdXROYW1lIiwicmVzZXQiLCJ0b2dnbGUiLCJyZW1vdmVQcm9qZWN0IiwicXVlcnlTZWxlY3RvckFsbCIsImxpRWxlbWVudCIsInJlbW92ZSIsImdldFByb2plY3QiLCJyZW1vdmVQcm9qZWN0RnJvbVRhc2tGb3JtIiwiYWRkUHJvamVjdFRvVGFza0Zvcm0iLCJ0b2RvRm9ybVByb2plY3QiLCJvcHRpb24iLCJ0YXNrVUkiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY3JlYXRlVGFzayIsImNhcmQiLCJjYXJkSGVhZGVyIiwiaDQiLCJkZWxldGVUYXNrQnRuIiwidG9kb1RpdGxlRWxlbWVudCIsInRvZG9EZXNjcmlwdGlvbkVsZW1lbnQiLCJwcmlvcml0eUVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJtcCIsImFkZFByb2plY3QiLCJxdWVyeVNlbGVjdG9yIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsInNwbGl0IiwiY29uc29sZSIsImxvZyIsInByb2plY3RMaXN0IiwiZGVsZXRlUHJvamVjdCIsInBhcnNlSW50IiwiZ2V0TmFtZSJdLCJtYXBwaW5ncyI6InFUQUFNQSxFLG1CQTRDSixXQUFZQyxFQUFPQyxFQUFhQyxJLDRGQUFVLHdLQUN4Q0MsS0FBS0MsSUFBTUwsRUFBS00sR0FDaEJOLEVBQUtNLEtBQ0xGLEtBQUtHLE9BQVNOLEVBQ2RHLEtBQUtJLGFBQWVOLEVBQ3BCRSxLQUFLSyxVQUFZTixFLDJDQTlDakIsT0FBT0MsS0FBS0csUSxhQUVKRyxHQUNSTixLQUFLRyxPQUFTRyxJLGtDQUlkLE9BQU9OLEtBQUtJLGMsYUFFRUUsR0FDZE4sS0FBS0ksYUFBZUUsSSw4QkFJcEIsT0FBT04sS0FBS08sVSxhQUVGRCxHQUNWTixLQUFLTyxTQUFXRCxJLCtCQUloQixPQUFPTixLQUFLSyxXLGFBRURDLEdBQ1hOLEtBQUtLLFVBQVlDLEksNEJBSWpCLE9BQU9OLEtBQUtRLFEsYUFFSkYsR0FDUk4sS0FBS1EsT0FBU0YsSSxnQ0FJZCxPQUFPTixLQUFLUyxZLGFBRUFILEdBQ1pOLEtBQUtTLFdBQWFILE8sK1dBekNoQlYsRSxLQTJDUSxHLElDM0NSYyxFLFdBY0osV0FBWUMsSSw0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WixhQUFhVCxNQXFCMUJKLEVBVE4sU0FBb0JTLEdBQ2xCLElBQUlXLEVBQVUsSUFBSVosRUFBUUMsR0FHMUIsT0FGQTBELEVBQUdDLFdBQVdoRCxHQUNkSyxrQkFBMEJMLEVBQVFYLEtBQU1XLEVBQVFwQixJQUN6Q29CLEVBQVFwQixHQUtOb0UsQ0FBVzNELEdBQ3BCZ0IsMEJBQ0FBLHVCQUErQnpCLEVBQUlTLE1BY3JDZ0Isa0NBQTBDLFNBQVMsU0FBQzZDLEdBQ2xELEdBQTRCLG1CQUF4QkEsRUFBRUUsT0FBT2pDLFFBQVF2QyxHQUF5QixDQUM1QyxJQUdNQSxFQUhnQnNFLEVBQUVFLE9BQU9DLFdBQ0VBLFdBQ1hBLFdBQ1J6RSxHQUFHMEUsTUFBTSxLQUFLLElBaEJoQyxTQUF1QjFFLEdBQ1YsSUFBUEEsSUFHSjJFLFFBQVFDLElBQUlULEVBQUdVLGFBQ2ZWLEVBQUdwQixjQUFjL0MsR0FDakJ5QixnQkFBd0J6QixHQUN4QnlCLDRCQUFvQ3pCLEdBQ3BDMkUsUUFBUUMsSUFBSVQsRUFBR1UsY0FTYkMsQ0FBY0MsU0FBUy9FLFFBa0IzQndELCtCQUFvQyxVQUFVLFNBQUNjLEdBQzdDQSxFQUFFQyxpQkFDRixJQUFJOUQsRUFBT3VFLFVBQ1haLFdBQVczRCxHQUNYZ0IsOEIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFRvZG8ge1xuICBfdGl0bGU7XG4gIGdldCB0aXRsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGl0bGU7XG4gIH1cbiAgc2V0IHRpdGxlKHZhbHVlKSB7XG4gICAgdGhpcy5fdGl0bGUgPSB2YWx1ZTtcbiAgfVxuICBfZGVzY3JpcHRpb247XG4gIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XG4gIH1cbiAgc2V0IGRlc2NyaXB0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSB2YWx1ZTtcbiAgfVxuICBfZHVlZGF0ZTtcbiAgZ2V0IGR1ZWRhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2R1ZWRhdGU7XG4gIH1cbiAgc2V0IGR1ZWRhdGUodmFsdWUpIHtcbiAgICB0aGlzLl9kdWVkYXRlID0gdmFsdWU7XG4gIH1cbiAgX3ByaW9yaXR5O1xuICBnZXQgcHJpb3JpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ByaW9yaXR5O1xuICB9XG4gIHNldCBwcmlvcml0eSh2YWx1ZSkge1xuICAgIHRoaXMuX3ByaW9yaXR5ID0gdmFsdWU7XG4gIH1cbiAgX25vdGVzO1xuICBnZXQgbm90ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25vdGVzO1xuICB9XG4gIHNldCBub3Rlcyh2YWx1ZSkge1xuICAgIHRoaXMuX25vdGVzID0gdmFsdWU7XG4gIH1cbiAgX2NoZWNrbGlzdDtcbiAgZ2V0IGNoZWNrbGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2hlY2tsaXN0O1xuICB9XG4gIHNldCBjaGVja2xpc3QodmFsdWUpIHtcbiAgICB0aGlzLl9jaGVja2xpc3QgPSB2YWx1ZTtcbiAgfVxuICBzdGF0aWMgaWQgPSAxO1xuICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5KSB7XG4gICAgdGhpcy5faWQgPSBUb2RvLmlkO1xuICAgIFRvZG8uaWQrKztcbiAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5fcHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgfVxufVxuXG5leHBvcnQgeyBUb2RvIH07XG4iLCJjbGFzcyBQcm9qZWN0IHtcbiAgc3RhdGljIGlkID0gMTtcbiAgX3RvZG9MaXN0ID0gW107XG4gIF9pZDtcbiAgZ2V0IGlkKCkge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuICBfbmFtZTtcbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gIH1cbiAgc2V0IG5hbWUodmFsdWUpIHtcbiAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gIH1cbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHRoaXMuX2lkID0gUHJvamVjdC5pZDtcbiAgICBQcm9qZWN0LmlkKys7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gIH1cblxuICBkZWxldGVUb2RvKCkge31cbn1cblxuZXhwb3J0IHsgUHJvamVjdCB9O1xuIiwiY29uc3QgcHJvamVjdFVJID0gKCgpID0+IHtcbiAgY29uc3QgcHJvamVjdFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3Qtd3JhcHBlclwiKTtcbiAgY29uc3QgYWRkUHJvamVjdEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtZm9ybVwiKTtcbiAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LW5hbWVcIik7XG4gIGNvbnN0IGdldFByb2plY3ROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZXQtcHJvamVjdC1uYW1lXCIpO1xuICBjb25zdCBzaWRlbmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlbmF2XCIpO1xuXG4gIGZ1bmN0aW9uIGNsb3NlUHJvamVjdElucHV0TmFtZSgpIHtcbiAgICBhZGRQcm9qZWN0Rm9ybS5yZXNldCgpO1xuICAgIGNvbnN0IGdldFByb2plY3ROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZXQtcHJvamVjdC1uYW1lXCIpO1xuICAgIGdldFByb2plY3ROYW1lLmNsYXNzTGlzdC50b2dnbGUoXCJnZXQtcHJvamVjdC1uYW1lLW9mZlwiKTtcbiAgfVxuICBmdW5jdGlvbiBnZXRQcm9qZWN0KGlkKSB7XG4gICAgY29uc3QgbGlFbGVtZW50cyA9IHByb2plY3RXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaVwiKTtcbiAgICBsaUVsZW1lbnRzLmZvckVhY2goKGxpRWxlbWVudCkgPT4ge1xuICAgICAgaWYgKGxpRWxlbWVudC5pZCA9PT0gYHByb2plY3QtJHtpZH1gKSB7XG4gICAgICAgIHJldHVybiBsaUVsZW1lbnQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVQcm9qZWN0KGlkKSB7XG4gICAgY29uc3QgbGlFbGVtZW50cyA9IHByb2plY3RXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaVwiKTtcbiAgICBsaUVsZW1lbnRzLmZvckVhY2goKGxpRWxlbWVudCkgPT4ge1xuICAgICAgaWYgKGxpRWxlbWVudC5pZCA9PT0gYHByb2plY3QtJHtpZH1gKSB7XG4gICAgICAgIGxpRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0VUkobmFtZSwgaWQpIHtcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBsaS5pZCA9IGBwcm9qZWN0LSR7aWR9YDtcbiAgICB7XG4gICAgICBjb25zdCBwcm9qZWN0Um93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHByb2plY3RSb3cuaWQgPSBcInByb2plY3Qtcm93XCI7XG4gICAgICBwcm9qZWN0Um93LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXJvd1wiKTtcbiAgICAgIGlmICghc2lkZW5hdi5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93LXNpZGVuYXZcIikpIHtcbiAgICAgICAgcHJvamVjdFJvdy5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1yb3ctd2hpdGVzcGFjZVwiKTtcbiAgICAgIH1cbiAgICAgIHtcbiAgICAgICAgY29uc3QgcHJvamVjdEhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHByb2plY3RIZWFkZXIuY2xhc3NMaXN0LmFkZChcInByb2plY3QtaGVhZGVyXCIpO1xuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgdG9nZ2xlVGFza0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgICAgdG9nZ2xlVGFza0J0bi5jbGFzc0xpc3QuYWRkKFwidG9nZ2xlLXRhc2stYnRuXCIpO1xuICAgICAgICAgIHRvZ2dsZVRhc2tCdG4uc3JjID0gXCIuL2ltYWdlcy9pY29uczgtZXhwYW5kLWFycm93LTE2LnBuZ1wiO1xuICAgICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICBwcm9qZWN0TmFtZS5kYXRhc2V0LmlkID0gXCJwcm9qZWN0LW5hbWVcIjtcbiAgICAgICAgICBwcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgICAgY29uc3QgcmVtb3ZlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgcmVtb3ZlUHJvamVjdEJ0bi50ZXh0Q29udGVudCA9IFwiLVwiO1xuICAgICAgICAgIHJlbW92ZVByb2plY3RCdG4uY2xhc3NMaXN0LmFkZChcInJlbW92ZS1wcm9qZWN0XCIpO1xuICAgICAgICAgIHJlbW92ZVByb2plY3RCdG4uZGF0YXNldC5pZCA9IFwicmVtb3ZlLXByb2plY3RcIjtcbiAgICAgICAgICBwcm9qZWN0SGVhZGVyLmFwcGVuZENoaWxkKHRvZ2dsZVRhc2tCdG4pO1xuICAgICAgICAgIHByb2plY3RIZWFkZXIuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpO1xuICAgICAgICAgIHByb2plY3RIZWFkZXIuYXBwZW5kQ2hpbGQocmVtb3ZlUHJvamVjdEJ0bik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJvamVjdFJvdy5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGVyKTtcbiAgICAgICAgY29uc3QgdGFza1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0YXNrV3JhcHBlci5kYXRhc2V0LmlkID0gXCJ0YXNrLXdyYXBwZXJcIjtcbiAgICAgICAgdGFza1dyYXBwZXIuY2xhc3NMaXN0LmFkZChcInRhc2std3JhcHBlclwiKTtcbiAgICAgICAgdGFza1dyYXBwZXIuY2xhc3NMaXN0LmFkZChcInRhc2std3JhcHBlci1vZmZcIik7XG4gICAgICAgIHtcbiAgICAgICAgICAvLyBjb25zdCB0YXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgLy8gdGFzay5jbGFzc0xpc3QuYWRkKCd0YXNrJyk7XG4gICAgICAgICAgLy8ge1xuICAgICAgICAgIC8vIFx0Y29uc3QgcHJpb3JpdHlJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgLy8gXHRwcmlvcml0eUljb24uY2xhc3NMaXN0LmFkZCgncHJpb3JpdHktaWNvbicpO1xuICAgICAgICAgIC8vIFx0Y29uc3QgdGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAvLyBcdHRhc2tOYW1lLmNsYXNzTGlzdC5hZGQoJ3Rhc2stbmFtZScpO1xuICAgICAgICAgIC8vIFx0dGFza05hbWUudGV4dENvbnRlbnQgPSdkbyB0aGUgYWZwZW9zZmonO1xuICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuICAgICAgICBwcm9qZWN0Um93LmFwcGVuZENoaWxkKHByb2plY3RIZWFkZXIpO1xuICAgICAgICBwcm9qZWN0Um93LmFwcGVuZENoaWxkKHRhc2tXcmFwcGVyKTtcbiAgICAgIH1cbiAgICAgIGxpLmFwcGVuZENoaWxkKHByb2plY3RSb3cpO1xuICAgIH1cbiAgICBwcm9qZWN0V3JhcHBlci5hcHBlbmRDaGlsZChsaSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRQcm9qZWN0VG9UYXNrRm9ybShpZCwgbmFtZSkge1xuICAgIGNvbnN0IHRvZG9Gb3JtUHJvamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby1mb3JtLXByb2plY3RzXCIpO1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uLnZhbHVlID0gaWQ7XG4gICAgb3B0aW9uLmlkID0gYHByb2plY3QtJHtpZH1gO1xuICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdG9kb0Zvcm1Qcm9qZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVQcm9qZWN0RnJvbVRhc2tGb3JtKGlkKSB7XG4gICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwcm9qZWN0LSR7aWR9YCk7XG4gICAgb3B0aW9uRWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlUHJvamVjdFVJLFxuICAgIGFkZFByb2plY3RGb3JtLFxuICAgIGlucHV0RWxlbWVudCxcbiAgICBjbG9zZVByb2plY3RJbnB1dE5hbWUsXG4gICAgcmVtb3ZlUHJvamVjdCxcbiAgICBwcm9qZWN0V3JhcHBlcixcbiAgICBnZXRQcm9qZWN0LFxuICAgIHJlbW92ZVByb2plY3RGcm9tVGFza0Zvcm0sXG4gICAgYWRkUHJvamVjdFRvVGFza0Zvcm0sXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBwcm9qZWN0VUkgfTtcbiIsImNvbnN0IHRhc2tVSSA9ICgoKSA9PiB7XG4gIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY29udGVudFwiKVswXTtcbiAgY29uc3QgYWRkVG9kb0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG8tZm9ybVwiKTtcbiAgY29uc3QgdG9kb1N1Ym1pdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LXRvZG9cIik7XG4gIGNvbnN0IHRvZG9UaXRsZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG8tdGl0bGVcIik7XG4gIGNvbnN0IHRvZG9EZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG8tZGVzY3JpcHRpb25cIik7XG4gIGNvbnN0IHByaW9yaXR5RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShcInByaW9yaXR5XCIpO1xuICBjb25zdCBjcmVhdGVUYXNrID0gKGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5KSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY2FyZC5jbGFzc0xpc3QuYWRkKFwiY2FyZFwiKTtcbiAgICBjYXJkLmlkID0gYGNhcmQtJHtpZH1gO1xuICAgIHtcbiAgICAgIGNvbnN0IGNhcmRIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY2FyZEhlYWRlci5jbGFzc0xpc3QuYWRkKFwiY2FyZC1oZWFkZXJcIik7XG4gICAgICB7XG4gICAgICAgIGNvbnN0IGg0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImg0XCIpO1xuICAgICAgICBoNC50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICBjb25zdCBkZWxldGVUYXNrQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgZGVsZXRlVGFza0J0bi5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uMlwiKTtcbiAgICAgICAgY2FyZEhlYWRlci5hcHBlbmRDaGlsZChoNCk7XG4gICAgICAgIGNhcmRIZWFkZXIuYXBwZW5kQ2hpbGQoZGVsZXRlVGFza0J0bik7XG4gICAgICB9XG4gICAgICBjb25zdCBjYXJkQm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICAgIGNhcmRCb2R5LmNsYXNzTGlzdC5hZGQoXCJjYXJkLWJvZHlcIik7XG4gICAgfVxuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY2FyZCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVUYXNrLFxuICAgIGFkZFRvZG9Gb3JtLFxuICAgIHRvZG9UaXRsZUVsZW1lbnQsXG4gICAgdG9kb0Rlc2NyaXB0aW9uRWxlbWVudCxcbiAgICBwcmlvcml0eUVsZW1lbnRzLFxuICAgIHRvZG9TdWJtaXRCdG4sXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyB0YXNrVUkgfTtcbiIsImltcG9ydCB7IFRvZG8gfSBmcm9tIFwiLi9Ub2RvXCI7XG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vUHJvamVjdFwiO1xuaW1wb3J0IHsgTWFpbkFwcCB9IGZyb20gXCIuL01haW5BcHBcIjtcbmltcG9ydCB7IHByb2plY3RVSSB9IGZyb20gXCIuL3Byb2plY3RVSVwiO1xuaW1wb3J0IHsgdGFza1VJIH0gZnJvbSBcIi4vdGFza1VJXCI7XG5cbmNvbnN0IG1wID0gbmV3IE1haW5BcHAoKTtcbmNvbnN0IHRvZ2dsZVRhc2tCdXR0b25JbWFnZSA9IFwiLi9pbWFnZXMvaWNvbnM4LWV4cGFuZC1hcnJvdy0xNi5wbmdcIjtcblxuY29uc3QgYXBwQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IHByb2plY3QgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGdldE5hbWUoKSB7XG4gICAgICByZXR1cm4gcHJvamVjdFVJLmlucHV0RWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgZGVmYXVsdFByb2plY3QgPSAoKSA9PiB7XG4gICAgICBjb25zdCBkZWZhdWx0UHJvamVjdCA9IG5ldyBQcm9qZWN0KFwiZGVmYXVsdFwiKTtcbiAgICAgIGRlZmF1bHRQcm9qZWN0Ll9pZCA9IDA7XG4gICAgICBtcC5hZGRQcm9qZWN0KGRlZmF1bHRQcm9qZWN0KTtcbiAgICAgIHByb2plY3RVSS5jcmVhdGVQcm9qZWN0VUkoZGVmYXVsdFByb2plY3QubmFtZSwgZGVmYXVsdFByb2plY3QuaWQpO1xuICAgICAgY29uc3QgcHJvamVjdExpRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC0wXCIpO1xuICAgICAgY29uc3QgcHJvamVjdFJvdyA9IHByb2plY3RMaUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXJvd1wiKTtcbiAgICAgIHByb2plY3RSb3cuY2xhc3NMaXN0LnJlbW92ZShcInByb2plY3Qtcm93LXdoaXRlc3BhY2VcIik7XG4gICAgfTtcbiAgICBkZWZhdWx0UHJvamVjdCgpO1xuICAgIGZ1bmN0aW9uIGFkZFByb2plY3QobmFtZSkge1xuICAgICAgbGV0IHByb2plY3QgPSBuZXcgUHJvamVjdChuYW1lKTtcbiAgICAgIG1wLmFkZFByb2plY3QocHJvamVjdCk7XG4gICAgICBwcm9qZWN0VUkuY3JlYXRlUHJvamVjdFVJKHByb2plY3QubmFtZSwgcHJvamVjdC5pZCk7XG4gICAgICByZXR1cm4gcHJvamVjdC5pZDtcbiAgICB9XG4gICAgcHJvamVjdFVJLmFkZFByb2plY3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGxldCBuYW1lID0gZ2V0TmFtZSgpO1xuICAgICAgbGV0IGlkID0gYWRkUHJvamVjdChuYW1lKTtcbiAgICAgIHByb2plY3RVSS5jbG9zZVByb2plY3RJbnB1dE5hbWUoKTtcbiAgICAgIHByb2plY3RVSS5hZGRQcm9qZWN0VG9UYXNrRm9ybShpZCwgbmFtZSk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBkZWxldGVQcm9qZWN0KGlkKSB7XG4gICAgICBpZiAoaWQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2cobXAucHJvamVjdExpc3QpO1xuICAgICAgbXAucmVtb3ZlUHJvamVjdChpZCk7XG4gICAgICBwcm9qZWN0VUkucmVtb3ZlUHJvamVjdChpZCk7XG4gICAgICBwcm9qZWN0VUkucmVtb3ZlUHJvamVjdEZyb21UYXNrRm9ybShpZCk7XG4gICAgICBjb25zb2xlLmxvZyhtcC5wcm9qZWN0TGlzdCk7XG4gICAgfVxuXG4gICAgcHJvamVjdFVJLnByb2plY3RXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmRhdGFzZXQuaWQgPT09IFwicmVtb3ZlLXByb2plY3RcIikge1xuICAgICAgICBjb25zdCBwcm9qZWN0SGVhZGVyID0gZS50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgcHJvamVjdFJvdyA9IHByb2plY3RIZWFkZXIucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgbGkgPSBwcm9qZWN0Um93LnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IGlkID0gbGkuaWQuc3BsaXQoXCItXCIpWzFdO1xuICAgICAgICBkZWxldGVQcm9qZWN0KHBhcnNlSW50KGlkKSk7XG4gICAgICAgIC8vbW9yZSBjbGVhbiB3YXkgd291bGQgYmUgaGF2aW5nIHRoZSBzYW1lIGlkIG51bWJlciBpbiBkYXRhLWlkIGFzIHRoZSBsaSBpZFxuICAgICAgfVxuICAgIH0pO1xuICB9KSgpO1xuXG4gIGNvbnN0IHRhc2tzID0gKCgpID0+IHtcbiAgICBmdW5jdGlvbiBhZGRUYXNrKHByb2plY3RJZCwgdGFza05hbWUsIHRhc2tEZXNjciwgdGFza1ByaW8pIHtcbiAgICAgIGxldCB0YXNrID0gbmV3IFRvZG8odGFza05hbWUsIHRhc2tEZXNjciwgdGFza1ByaW8pO1xuXG4gICAgICBjb25zdCBwcm9qZWN0TGlFbGVtZW50ID0gcHJvamVjdFVJLmdldFByb2plY3QocHJvamVjdElkKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRUaXRsZSgpIHt9XG4gICAgZnVuY3Rpb24gZ2V0RGVzY3IoKSB7fVxuICAgIGZ1bmN0aW9uIGdldFByaW8oKSB7fVxuICAgIGZ1bmN0aW9uIGdldFByb2plY3RJZCgpIHt9XG5cbiAgICB0YXNrVUkuYWRkVG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbGV0IG5hbWUgPSBnZXROYW1lKCk7XG4gICAgICBhZGRQcm9qZWN0KG5hbWUpO1xuICAgICAgcHJvamVjdFVJLmNsb3NlUHJvamVjdElucHV0TmFtZSgpO1xuICAgIH0pO1xuICB9KSgpO1xufSkoKTtcbiIsImNsYXNzIE1haW5BcHAge1xuICBfcHJvamVjdExpc3QgPSBbXTtcblxuICBhZGRQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcbiAgICB0aGlzLl9wcm9qZWN0TGlzdC5wdXNoKHByb2plY3QpO1xuICB9O1xuXG4gIHVwZGF0ZVByb2plY3ROYW1lID0gKG5hbWUsIGlkKSA9PiB7XG4gICAgdGhpcy5fcHJvamVjdExpc3QuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgaWYgKHByb2plY3QuaWQgPT09IGlkKSB7XG4gICAgICAgIHByb2plY3QubmFtZSA9IG5hbWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmVtb3ZlUHJvamVjdCA9IChpZCkgPT4ge1xuICAgIHRoaXMuX3Byb2plY3RMaXN0ID0gdGhpcy5fcHJvamVjdExpc3QuZmlsdGVyKFxuICAgICAgKHByb2plY3QpID0+IHByb2plY3QuaWQgIT09IGlkXG4gICAgKTtcbiAgfTtcblxuICBnZXQgcHJvamVjdExpc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb2plY3RMaXN0O1xuICB9XG59XG5cbmV4cG9ydCB7IE1haW5BcHAgfTtcbiJdLCJzb3VyY2VSb290IjoiIn0=