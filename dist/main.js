(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){var n,o;function r(e,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t(this,"_title",void 0),t(this,"_description",void 0),t(this,"_duedate",void 0),t(this,"_priority",void 0),t(this,"_notes",void 0),t(this,"_checklist",void 0),t(this,"_id",void 0),this._id=r.id,r.id++,this._title=e,this._description=n,this._priority=o}return n=r,(o=[{key:"title",get:function(){return this._title},set:function(e){this._title=e}},{key:"description",get:function(){return this._description},set:function(e){this._description=e}},{key:"duedate",get:function(){return this._duedate},set:function(e){this._duedate=e}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority=e}},{key:"notes",get:function(){return this._notes},set:function(e){this._notes=e}},{key:"checklist",get:function(){return this._checklist},set:function(e){this._checklist=e}},{key:"id",get:function(){return this._id}}])&&e(n.prototype,o),r}();function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t(n,"id",1);var a=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_todoList",[]),i(this,"_id",void 0),i(this,"_name",void 0),i(this,"addTodo",(function(e){n._todoList.push(e)})),this._id=e.id,e.id++,this._name=t}return r(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}}]),r(e,[{key:"deleteTodo",value:function(){}}]),e}();function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i(a,"id",1);var s=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_projectList",[]),d(this,"addProject",(function(e){t._projectList.push(e)})),d(this,"updateProjectName",(function(e,n){t._projectList.forEach((function(t){t.id===n&&(t.name=e)}))})),d(this,"removeProject",(function(e){t._projectList=t._projectList.filter((function(t){return t.id!==e}))}))}var t,n;return t=e,(n=[{key:"projectList",get:function(){return this._projectList}}])&&c(t.prototype,n),e}(),u=function(){var e=document.getElementById("project-wrapper"),t=document.getElementById("project-form"),n=document.getElementById("project-name"),o=(document.getElementById("get-project-name"),document.getElementById("sidenav"));function r(t){var n=e.querySelectorAll("li");return Array.from(n).find((function(e){return e.id==="project-".concat(t)}))}return{createProjectUI:function(t,n){var r=document.createElement("li");r.id="project-".concat(n);var i=document.createElement("div");i.id="project-row",i.classList.add("project-row"),o.classList.contains("show-sidenav")||i.classList.add("project-row-whitespace");var a=document.createElement("div");a.classList.add("project-header");var c=document.createElement("img");c.classList.add("toggle-task-btn"),c.src="./images/icons8-expand-arrow-16.png";var d=document.createElement("button");d.dataset.id="project-name",d.textContent=t;var s=document.createElement("button");s.textContent="-",s.classList.add("remove-project"),s.dataset.id="remove-project",a.appendChild(c),a.appendChild(d),a.appendChild(s);var u=document.createElement("div");u.dataset.id="task-wrapper",u.classList.add("task-wrapper"),u.classList.add("task-wrapper-off"),i.appendChild(a),i.appendChild(u),r.appendChild(i),e.appendChild(r)},addProjectForm:t,inputElement:n,closeProjectInputName:function(){t.reset(),document.getElementById("get-project-name").classList.toggle("get-project-name-off")},removeProject:function(t){e.querySelectorAll("li").forEach((function(e){e.id==="project-".concat(t)&&e.remove()}))},projectWrapper:e,getProject:r,removeProjectFromTaskForm:function(e){document.getElementById("project-".concat(e)).remove()},addProjectToTaskForm:function(e,t){var n=document.getElementById("todo-form-projects"),o=document.createElement("option");o.value=e,o.id="project-".concat(e),o.textContent=t,n.appendChild(o)},getTaskWrapper:function(e){return r(e).querySelector('div[data-id="task-wrapper"]')}}}();function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var m,p,f,v,h,y,g,j,E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"HIGH",get:function(){return{color:"red",value:0,text:"high"}}},{key:"MEDIUM",get:function(){return{color:"yellow",value:1,text:"medium"}}},{key:"LOW",get:function(){return{color:"green",value:2,text:"low"}}}],null&&l(t.prototype,null),n&&l(t,n),e}(),b=(m=document.getElementsByClassName("content")[0],p=document.getElementById("todo-form"),f=document.getElementById("submit-todo"),v=document.getElementsByName("priority"),h=document.getElementById("todo-title"),y=document.getElementById("todo-description"),g=document.getElementById("todo-form-projects"),{createTaskNavBar:function(e,t,n){var o=document.createElement("div");o.classList.add("task"),o.id="navTask-".concat(e);var r=document.createElement("div");switch(r.classList.add("priority-icon"),n){case E.LOW.text:r.style.backgroundColor=E.LOW.color;break;case E.MEDIUM.text:r.style.backgroundColor=E.MEDIUM.color;break;case E.HIGH.text:r.style.backgroundColor=E.HIGH.color}var i=document.createElement("div");return i.classList.add("task-name"),i.textContent=t,o.appendChild(r),o.appendChild(i),o},createTask:function(e,t,n,o){var r=document.createElement("div");r.classList.add("card"),r.id="card-".concat(e);var i=document.createElement("div");i.classList.add("card-header");var a=document.createElement("h4");a.textContent=t;var c=document.createElement("button");c.classList.add("button2"),i.appendChild(a),i.appendChild(c),document.createElement("textarea").classList.add("card-body"),m.appendChild(r)},formPriorityElements:v,addTodoForm:p,todoSubmitBtn:f,formDescriptionElement:y,formTitleElement:h,formProjectElement:g,closeTaskInputForm:function(){p.reset(),document.getElementById("add-todo-modal").classList.toggle("add-todo-modal-off")}}),k=new s;(j=new a("default"))._id=0,k.addProject(j),u.createProjectUI(j.name,j.id),document.getElementById("project-0").querySelector(".project-row").classList.remove("project-row-whitespace"),u.addProjectForm.addEventListener("submit",(function(e){e.preventDefault();var t=u.inputElement.value,n=function(e){var t=new a(e);return k.addProject(t),u.createProjectUI(t.name,t.id),t.id}(t);u.closeProjectInputName(),u.addProjectToTaskForm(n,t)})),u.projectWrapper.addEventListener("click",(function(e){if("remove-project"===e.target.dataset.id){var t=e.target.parentNode.parentNode.parentNode.id.split("-")[1];!function(e){0!==e&&(console.log(k.projectList),k.removeProject(e),u.removeProject(e),u.removeProjectFromTaskForm(e),console.log(k.projectList))}(parseInt(t))}})),b.addTodoForm.addEventListener("submit",(function(e){var t,o;e.preventDefault(),function(e,t,o,r){var i=new n(t,o,r,e);console.table(k.projectList);for(var a=k.projectList,c=0;c<a.length;c++)if(a[c].id===e){a[c].addTodo(i);break}var d=b.createTaskNavBar(i.id,i.title,i.priority);u.getTaskWrapper(e).appendChild(d)}((o=b.formProjectElement,parseInt(o.value)),b.formTitleElement.value,b.formDescriptionElement.value,(b.formPriorityElements.forEach((function(e){e.checked&&(t=e.value)})),t)),b.closeTaskInputForm()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL1RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9Qcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvTWFpbkFwcC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3Byb2plY3RVSS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3Rhc2tVSS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvcHJpb3JpdHlFbnVtLmpzIl0sIm5hbWVzIjpbIlRvZG8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJ0aGlzIiwiX2lkIiwiaWQiLCJfdGl0bGUiLCJfZGVzY3JpcHRpb24iLCJfcHJpb3JpdHkiLCJ2YWx1ZSIsIl9kdWVkYXRlIiwiX25vdGVzIiwiX2NoZWNrbGlzdCIsIlByb2plY3QiLCJuYW1lIiwidG9kbyIsIl90b2RvTGlzdCIsInB1c2giLCJfbmFtZSIsIk1haW5BcHAiLCJwcm9qZWN0IiwiX3Byb2plY3RMaXN0IiwiZm9yRWFjaCIsImZpbHRlciIsInByb2plY3RVSSIsInByb2plY3RXcmFwcGVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFkZFByb2plY3RGb3JtIiwiaW5wdXRFbGVtZW50Iiwic2lkZW5hdiIsImdldFByb2plY3QiLCJsaUVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsIkFycmF5IiwiZnJvbSIsImZpbmQiLCJsaUVsZW1lbnQiLCJjcmVhdGVQcm9qZWN0VUkiLCJsaSIsImNyZWF0ZUVsZW1lbnQiLCJwcm9qZWN0Um93IiwiY2xhc3NMaXN0IiwiYWRkIiwiY29udGFpbnMiLCJwcm9qZWN0SGVhZGVyIiwidG9nZ2xlVGFza0J0biIsInNyYyIsInByb2plY3ROYW1lIiwiZGF0YXNldCIsInRleHRDb250ZW50IiwicmVtb3ZlUHJvamVjdEJ0biIsImFwcGVuZENoaWxkIiwidGFza1dyYXBwZXIiLCJjbG9zZVByb2plY3RJbnB1dE5hbWUiLCJyZXNldCIsInRvZ2dsZSIsInJlbW92ZVByb2plY3QiLCJyZW1vdmUiLCJyZW1vdmVQcm9qZWN0RnJvbVRhc2tGb3JtIiwiYWRkUHJvamVjdFRvVGFza0Zvcm0iLCJ0b2RvRm9ybVByb2plY3QiLCJvcHRpb24iLCJnZXRUYXNrV3JhcHBlciIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiYWRkVG9kb0Zvcm0iLCJ0b2RvU3VibWl0QnRuIiwiZm9ybVByaW9yaXR5RWxlbWVudHMiLCJmb3JtVGl0bGVFbGVtZW50IiwiZm9ybURlc2NyaXB0aW9uRWxlbWVudCIsImZvcm1Qcm9qZWN0RWxlbWVudCIsImRlZmF1bHRQcm9qZWN0IiwiY29sb3IiLCJ0ZXh0IiwidGFza1VJIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEVsZW1lbnRzQnlOYW1lIiwiY3JlYXRlVGFza05hdkJhciIsInByaW9yaXR5SW4iLCJ0YXNrRWxlbWVudCIsInByaW9yaXR5SWNvbiIsIkxPVyIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiTUVESVVNIiwiSElHSCIsInRhc2tOYW1lIiwiY3JlYXRlVGFzayIsImNhcmQiLCJjYXJkSGVhZGVyIiwiaDQiLCJkZWxldGVUYXNrQnRuIiwiY2xvc2VUYXNrSW5wdXRGb3JtIiwibXAiLCJhZGRQcm9qZWN0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsInNwbGl0IiwiY29uc29sZSIsImxvZyIsInByb2plY3RMaXN0IiwiZGVsZXRlUHJvamVjdCIsInBhcnNlSW50IiwiY2hlY2tlZFZhbHVlIiwiZWxlbWVudCIsInByb2plY3RJZCIsInRhc2tEZXNjciIsInRhc2tQcmlvIiwidGFzayIsInRhYmxlIiwiYXJyYXkiLCJpIiwibGVuZ3RoIiwiYWRkVG9kbyIsInRhc2tET01OYXZFbGVtZW50IiwiYWRkVGFzayIsImNoZWNrZWQiXSwibWFwcGluZ3MiOiJxVEFBTUEsRSxtQkFnREosV0FBWUMsRUFBT0MsRUFBYUMs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Qiw0QkFBb0NuQixHQUNwQ2dHLFFBQVFDLElBQUlSLEVBQUdTLGNBU2JDLENBQWNDLFNBQVNwRyxRQW1EM0JzRSwrQkFBb0MsVUFBVSxTQUFDcUIsR0FmL0MsSUFFTVUsRUFTQUMsRUFLSlgsRUFBRUMsaUJBN0NKLFNBQWlCVyxFQUFXckIsRUFBVXNCLEVBQVdDLEdBQy9DLElBQUlDLEVBQU8sSUFBSWhILEVBQUt3RixFQUFVc0IsRUFBV0MsRUFBVUYsR0FDbkRQLFFBQVFXLE1BQU1sQixFQUFHUyxhQUdqQixJQUZBLElBQUlVLEVBQVFuQixFQUFHUyxZQUVOVyxFQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQ2hDLEdBQUlELEVBQU1DLEdBQUc3RyxLQUFPdUcsRUFBVyxDQUM3QkssRUFBTUMsR0FBR0UsUUFBUUwsR0FDakIsTUFNSixJQUFNTSxFQUFvQjFDLEVBQU9HLGlCQUMvQmlDLEVBQUsxRyxHQUNMMEcsRUFBSy9HLE1BQ0wrRyxFQUFLN0csVUFFYXNCLEVBQVV1QyxlQUFlNkMsR0FDakN4RCxZQUFZaUUsR0EwQnhCQyxFQU5JWCxFQUFVaEMsRUFBT0osbUJBQ2RrQyxTQUFTRSxFQUFRbEcsUUFqQmpCa0UsRUFBT04saUJBQWlCNUQsTUFHeEJrRSxFQUFPTCx1QkFBdUI3RCxPQUd0QmtFLEVBQU9QLHFCQUViOUMsU0FBUSxTQUFDcUYsR0FDWkEsRUFBUVksVUFDVmIsRUFBZUMsRUFBUWxHLFVBR3BCaUcsSUFVUC9CLDJCIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUb2RvIHtcbiAgX3RpdGxlO1xuICBnZXQgdGl0bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3RpdGxlO1xuICB9XG4gIHNldCB0aXRsZSh2YWx1ZSkge1xuICAgIHRoaXMuX3RpdGxlID0gdmFsdWU7XG4gIH1cbiAgX2Rlc2NyaXB0aW9uO1xuICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xuICB9XG4gIHNldCBkZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdmFsdWU7XG4gIH1cbiAgX2R1ZWRhdGU7XG4gIGdldCBkdWVkYXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9kdWVkYXRlO1xuICB9XG4gIHNldCBkdWVkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5fZHVlZGF0ZSA9IHZhbHVlO1xuICB9XG4gIF9wcmlvcml0eTtcbiAgZ2V0IHByaW9yaXR5KCkge1xuICAgIHJldHVybiB0aGlzLl9wcmlvcml0eTtcbiAgfVxuICBzZXQgcHJpb3JpdHkodmFsdWUpIHtcbiAgICB0aGlzLl9wcmlvcml0eSA9IHZhbHVlO1xuICB9XG4gIF9ub3RlcztcbiAgZ2V0IG5vdGVzKCkge1xuICAgIHJldHVybiB0aGlzLl9ub3RlcztcbiAgfVxuICBzZXQgbm90ZXModmFsdWUpIHtcbiAgICB0aGlzLl9ub3RlcyA9IHZhbHVlO1xuICB9XG4gIF9jaGVja2xpc3Q7XG4gIGdldCBjaGVja2xpc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrbGlzdDtcbiAgfVxuICBzZXQgY2hlY2tsaXN0KHZhbHVlKSB7XG4gICAgdGhpcy5fY2hlY2tsaXN0ID0gdmFsdWU7XG4gIH1cbiAgc3RhdGljIGlkID0gMTtcbiAgX2lkO1xuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG4gIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHkpIHtcbiAgICB0aGlzLl9pZCA9IFRvZG8uaWQ7XG4gICAgVG9kby5pZCsrO1xuICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLl9wcmlvcml0eSA9IHByaW9yaXR5O1xuICB9XG59XG5cbmV4cG9ydCB7IFRvZG8gfTtcbiIsImNsYXNzIFByb2plY3Qge1xuICBzdGF0aWMgaWQgPSAxO1xuICBfdG9kb0xpc3QgPSBbXTtcbiAgX2lkO1xuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG4gIF9uYW1lO1xuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgfVxuICBzZXQgbmFtZSh2YWx1ZSkge1xuICAgIHRoaXMuX25hbWUgPSB2YWx1ZTtcbiAgfVxuICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgdGhpcy5faWQgPSBQcm9qZWN0LmlkO1xuICAgIFByb2plY3QuaWQrKztcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgfVxuXG4gIGFkZFRvZG8gPSAodG9kbykgPT4ge1xuICAgIHRoaXMuX3RvZG9MaXN0LnB1c2godG9kbyk7XG4gIH07XG5cbiAgZGVsZXRlVG9kbygpIHt9XG59XG5cbmV4cG9ydCB7IFByb2plY3QgfTtcbiIsImNsYXNzIE1haW5BcHAge1xuICBfcHJvamVjdExpc3QgPSBbXTtcblxuICBhZGRQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcbiAgICB0aGlzLl9wcm9qZWN0TGlzdC5wdXNoKHByb2plY3QpO1xuICB9O1xuXG4gIHVwZGF0ZVByb2plY3ROYW1lID0gKG5hbWUsIGlkKSA9PiB7XG4gICAgdGhpcy5fcHJvamVjdExpc3QuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgaWYgKHByb2plY3QuaWQgPT09IGlkKSB7XG4gICAgICAgIHByb2plY3QubmFtZSA9IG5hbWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmVtb3ZlUHJvamVjdCA9IChpZCkgPT4ge1xuICAgIHRoaXMuX3Byb2plY3RMaXN0ID0gdGhpcy5fcHJvamVjdExpc3QuZmlsdGVyKFxuICAgICAgKHByb2plY3QpID0+IHByb2plY3QuaWQgIT09IGlkXG4gICAgKTtcbiAgfTtcblxuICBnZXQgcHJvamVjdExpc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb2plY3RMaXN0O1xuICB9XG59XG5cbmV4cG9ydCB7IE1haW5BcHAgfTtcbiIsImNvbnN0IHByb2plY3RVSSA9ICgoKSA9PiB7XG4gIGNvbnN0IHByb2plY3RXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LXdyYXBwZXJcIik7XG4gIGNvbnN0IGFkZFByb2plY3RGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWZvcm1cIik7XG4gIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC1uYW1lXCIpO1xuICBjb25zdCBnZXRQcm9qZWN0TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2V0LXByb2plY3QtbmFtZVwiKTtcbiAgY29uc3Qgc2lkZW5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lkZW5hdlwiKTtcblxuICBmdW5jdGlvbiBjbG9zZVByb2plY3RJbnB1dE5hbWUoKSB7XG4gICAgYWRkUHJvamVjdEZvcm0ucmVzZXQoKTtcbiAgICBjb25zdCBnZXRQcm9qZWN0TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2V0LXByb2plY3QtbmFtZVwiKTtcbiAgICBnZXRQcm9qZWN0TmFtZS5jbGFzc0xpc3QudG9nZ2xlKFwiZ2V0LXByb2plY3QtbmFtZS1vZmZcIik7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0UHJvamVjdChpZCkge1xuICAgIGNvbnN0IGxpRWxlbWVudHMgPSBwcm9qZWN0V3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKFwibGlcIik7XG4gICAgbGV0IGZvdW5kRWxlbWVudDtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShsaUVsZW1lbnRzKS5maW5kKFxuICAgICAgKGxpRWxlbWVudCkgPT4gbGlFbGVtZW50LmlkID09PSBgcHJvamVjdC0ke2lkfWBcbiAgICApO1xuICB9XG4gIGZ1bmN0aW9uIGdldFRhc2tXcmFwcGVyKGlkKSB7XG4gICAgY29uc3QgbGlFbGVtZW50ID0gZ2V0UHJvamVjdChpZCk7XG4gICAgcmV0dXJuIGxpRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdkaXZbZGF0YS1pZD1cInRhc2std3JhcHBlclwiXScpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdChpZCkge1xuICAgIGNvbnN0IGxpRWxlbWVudHMgPSBwcm9qZWN0V3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKFwibGlcIik7XG4gICAgbGlFbGVtZW50cy5mb3JFYWNoKChsaUVsZW1lbnQpID0+IHtcbiAgICAgIGlmIChsaUVsZW1lbnQuaWQgPT09IGBwcm9qZWN0LSR7aWR9YCkge1xuICAgICAgICBsaUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gY3JlYXRlUHJvamVjdFVJKG5hbWUsIGlkKSB7XG4gICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbGkuaWQgPSBgcHJvamVjdC0ke2lkfWA7XG4gICAge1xuICAgICAgY29uc3QgcHJvamVjdFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBwcm9qZWN0Um93LmlkID0gXCJwcm9qZWN0LXJvd1wiO1xuICAgICAgcHJvamVjdFJvdy5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC1yb3dcIik7XG4gICAgICBpZiAoIXNpZGVuYXYuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvdy1zaWRlbmF2XCIpKSB7XG4gICAgICAgIHByb2plY3RSb3cuY2xhc3NMaXN0LmFkZChcInByb2plY3Qtcm93LXdoaXRlc3BhY2VcIik7XG4gICAgICB9XG4gICAgICB7XG4gICAgICAgIGNvbnN0IHByb2plY3RIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBwcm9qZWN0SGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LWhlYWRlclwiKTtcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHRvZ2dsZVRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICAgIHRvZ2dsZVRhc2tCdG4uY2xhc3NMaXN0LmFkZChcInRvZ2dsZS10YXNrLWJ0blwiKTtcbiAgICAgICAgICB0b2dnbGVUYXNrQnRuLnNyYyA9IFwiLi9pbWFnZXMvaWNvbnM4LWV4cGFuZC1hcnJvdy0xNi5wbmdcIjtcbiAgICAgICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgcHJvamVjdE5hbWUuZGF0YXNldC5pZCA9IFwicHJvamVjdC1uYW1lXCI7XG4gICAgICAgICAgcHJvamVjdE5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICAgIGNvbnN0IHJlbW92ZVByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAgIHJlbW92ZVByb2plY3RCdG4udGV4dENvbnRlbnQgPSBcIi1cIjtcbiAgICAgICAgICByZW1vdmVQcm9qZWN0QnRuLmNsYXNzTGlzdC5hZGQoXCJyZW1vdmUtcHJvamVjdFwiKTtcbiAgICAgICAgICByZW1vdmVQcm9qZWN0QnRuLmRhdGFzZXQuaWQgPSBcInJlbW92ZS1wcm9qZWN0XCI7XG4gICAgICAgICAgcHJvamVjdEhlYWRlci5hcHBlbmRDaGlsZCh0b2dnbGVUYXNrQnRuKTtcbiAgICAgICAgICBwcm9qZWN0SGVhZGVyLmFwcGVuZENoaWxkKHByb2plY3ROYW1lKTtcbiAgICAgICAgICBwcm9qZWN0SGVhZGVyLmFwcGVuZENoaWxkKHJlbW92ZVByb2plY3RCdG4pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHByb2plY3RSb3cuYXBwZW5kQ2hpbGQocHJvamVjdEhlYWRlcik7XG4gICAgICAgIGNvbnN0IHRhc2tXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGFza1dyYXBwZXIuZGF0YXNldC5pZCA9IFwidGFzay13cmFwcGVyXCI7XG4gICAgICAgIHRhc2tXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLXdyYXBwZXJcIik7XG4gICAgICAgIHRhc2tXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLXdyYXBwZXItb2ZmXCIpO1xuICAgICAgICB7XG4gICAgICAgICAgLy8gY29uc3QgdGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIC8vIHRhc2suY2xhc3NMaXN0LmFkZCgndGFzaycpO1xuICAgICAgICAgIC8vIHtcbiAgICAgICAgICAvLyBcdGNvbnN0IHByaW9yaXR5SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIC8vIFx0cHJpb3JpdHlJY29uLmNsYXNzTGlzdC5hZGQoJ3ByaW9yaXR5LWljb24nKTtcbiAgICAgICAgICAvLyBcdGNvbnN0IHRhc2tOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgLy8gXHR0YXNrTmFtZS5jbGFzc0xpc3QuYWRkKCd0YXNrLW5hbWUnKTtcbiAgICAgICAgICAvLyBcdHRhc2tOYW1lLnRleHRDb250ZW50ID0nZG8gdGhlIGFmcGVvc2ZqJztcbiAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICAgICAgcHJvamVjdFJvdy5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGVyKTtcbiAgICAgICAgcHJvamVjdFJvdy5hcHBlbmRDaGlsZCh0YXNrV3JhcHBlcik7XG4gICAgICB9XG4gICAgICBsaS5hcHBlbmRDaGlsZChwcm9qZWN0Um93KTtcbiAgICB9XG4gICAgcHJvamVjdFdyYXBwZXIuYXBwZW5kQ2hpbGQobGkpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkUHJvamVjdFRvVGFza0Zvcm0oaWQsIG5hbWUpIHtcbiAgICBjb25zdCB0b2RvRm9ybVByb2plY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG8tZm9ybS1wcm9qZWN0c1wiKTtcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbi52YWx1ZSA9IGlkO1xuICAgIG9wdGlvbi5pZCA9IGBwcm9qZWN0LSR7aWR9YDtcbiAgICBvcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRvZG9Gb3JtUHJvamVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdEZyb21UYXNrRm9ybShpZCkge1xuICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcHJvamVjdC0ke2lkfWApO1xuICAgIG9wdGlvbkVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNyZWF0ZVByb2plY3RVSSxcbiAgICBhZGRQcm9qZWN0Rm9ybSxcbiAgICBpbnB1dEVsZW1lbnQsXG4gICAgY2xvc2VQcm9qZWN0SW5wdXROYW1lLFxuICAgIHJlbW92ZVByb2plY3QsXG4gICAgcHJvamVjdFdyYXBwZXIsXG4gICAgZ2V0UHJvamVjdCxcbiAgICByZW1vdmVQcm9qZWN0RnJvbVRhc2tGb3JtLFxuICAgIGFkZFByb2plY3RUb1Rhc2tGb3JtLFxuICAgIGdldFRhc2tXcmFwcGVyLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgcHJvamVjdFVJIH07XG4iLCJpbXBvcnQgeyBwcmlvcml0eSB9IGZyb20gXCIuL3ByaW9yaXR5RW51bVwiO1xuY29uc3QgdGFza1VJID0gKCgpID0+IHtcbiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb250ZW50XCIpWzBdO1xuICBjb25zdCBhZGRUb2RvRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kby1mb3JtXCIpO1xuICBjb25zdCB0b2RvU3VibWl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtdG9kb1wiKTtcbiAgY29uc3QgZm9ybVByaW9yaXR5RWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShcInByaW9yaXR5XCIpO1xuICBjb25zdCBmb3JtVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvLXRpdGxlXCIpO1xuICBjb25zdCBmb3JtRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RvLWRlc2NyaXB0aW9uXCIpO1xuICBjb25zdCBmb3JtUHJvamVjdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZG8tZm9ybS1wcm9qZWN0c1wiKTtcblxuICBmdW5jdGlvbiBjbG9zZVRhc2tJbnB1dEZvcm0oKSB7XG4gICAgYWRkVG9kb0Zvcm0ucmVzZXQoKTtcbiAgICBjb25zdCB0b2RvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC10b2RvLW1vZGFsXCIpO1xuICAgIHRvZG9Nb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwiYWRkLXRvZG8tbW9kYWwtb2ZmXCIpO1xuICB9XG5cbiAgY29uc3QgY3JlYXRlVGFzayA9IChpZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSkgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNhcmQuY2xhc3NMaXN0LmFkZChcImNhcmRcIik7XG4gICAgY2FyZC5pZCA9IGBjYXJkLSR7aWR9YDtcbiAgICB7XG4gICAgICBjb25zdCBjYXJkSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNhcmRIZWFkZXIuY2xhc3NMaXN0LmFkZChcImNhcmQtaGVhZGVyXCIpO1xuICAgICAge1xuICAgICAgICBjb25zdCBoNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcbiAgICAgICAgaDQudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgY29uc3QgZGVsZXRlVGFza0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGRlbGV0ZVRhc2tCdG4uY2xhc3NMaXN0LmFkZChcImJ1dHRvbjJcIik7XG4gICAgICAgIGNhcmRIZWFkZXIuYXBwZW5kQ2hpbGQoaDQpO1xuICAgICAgICBjYXJkSGVhZGVyLmFwcGVuZENoaWxkKGRlbGV0ZVRhc2tCdG4pO1xuICAgICAgfVxuICAgICAgY29uc3QgY2FyZEJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG4gICAgICBjYXJkQm9keS5jbGFzc0xpc3QuYWRkKFwiY2FyZC1ib2R5XCIpO1xuICAgIH1cbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGNhcmQpO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZVRhc2tOYXZCYXIgPSAoaWQsIHRpdGxlLCBwcmlvcml0eUluKSA9PiB7XG4gICAgY29uc3QgdGFza0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YXNrXCIpO1xuICAgIHRhc2tFbGVtZW50LmlkID0gYG5hdlRhc2stJHtpZH1gO1xuICAgIHtcbiAgICAgIGNvbnN0IHByaW9yaXR5SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBwcmlvcml0eUljb24uY2xhc3NMaXN0LmFkZChcInByaW9yaXR5LWljb25cIik7XG4gICAgICBzd2l0Y2ggKHByaW9yaXR5SW4pIHtcbiAgICAgICAgY2FzZSBwcmlvcml0eS5MT1cudGV4dDoge1xuICAgICAgICAgIHByaW9yaXR5SWNvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwcmlvcml0eS5MT1cuY29sb3I7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBwcmlvcml0eS5NRURJVU0udGV4dDoge1xuICAgICAgICAgIHByaW9yaXR5SWNvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwcmlvcml0eS5NRURJVU0uY29sb3I7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBwcmlvcml0eS5ISUdILnRleHQ6IHtcbiAgICAgICAgICBwcmlvcml0eUljb24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcHJpb3JpdHkuSElHSC5jb2xvcjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgdGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgdGFza05hbWUuY2xhc3NMaXN0LmFkZChcInRhc2stbmFtZVwiKTtcbiAgICAgIHRhc2tOYW1lLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICB0YXNrRWxlbWVudC5hcHBlbmRDaGlsZChwcmlvcml0eUljb24pO1xuICAgICAgdGFza0VsZW1lbnQuYXBwZW5kQ2hpbGQodGFza05hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGFza0VsZW1lbnQ7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVUYXNrTmF2QmFyLFxuICAgIGNyZWF0ZVRhc2ssXG4gICAgZm9ybVByaW9yaXR5RWxlbWVudHMsXG4gICAgYWRkVG9kb0Zvcm0sXG4gICAgdG9kb1N1Ym1pdEJ0bixcbiAgICBmb3JtRGVzY3JpcHRpb25FbGVtZW50LFxuICAgIGZvcm1UaXRsZUVsZW1lbnQsXG4gICAgZm9ybVByb2plY3RFbGVtZW50LFxuICAgIGNsb3NlVGFza0lucHV0Rm9ybSxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IHRhc2tVSSB9O1xuIiwiaW1wb3J0IHsgVG9kbyB9IGZyb20gXCIuL1RvZG9cIjtcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9Qcm9qZWN0XCI7XG5pbXBvcnQgeyBNYWluQXBwIH0gZnJvbSBcIi4vTWFpbkFwcFwiO1xuaW1wb3J0IHsgcHJvamVjdFVJIH0gZnJvbSBcIi4vcHJvamVjdFVJXCI7XG5pbXBvcnQgeyB0YXNrVUkgfSBmcm9tIFwiLi90YXNrVUlcIjtcblxuY29uc3QgbXAgPSBuZXcgTWFpbkFwcCgpO1xuY29uc3QgdG9nZ2xlVGFza0J1dHRvbkltYWdlID0gXCIuL2ltYWdlcy9pY29uczgtZXhwYW5kLWFycm93LTE2LnBuZ1wiO1xuXG5jb25zdCBhcHBDb250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3QgcHJvamVjdCA9ICgoKSA9PiB7XG4gICAgZnVuY3Rpb24gZ2V0TmFtZSgpIHtcbiAgICAgIHJldHVybiBwcm9qZWN0VUkuaW5wdXRFbGVtZW50LnZhbHVlO1xuICAgIH1cbiAgICBjb25zdCBkZWZhdWx0UHJvamVjdCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGRlZmF1bHRQcm9qZWN0ID0gbmV3IFByb2plY3QoXCJkZWZhdWx0XCIpO1xuICAgICAgZGVmYXVsdFByb2plY3QuX2lkID0gMDtcbiAgICAgIG1wLmFkZFByb2plY3QoZGVmYXVsdFByb2plY3QpO1xuICAgICAgcHJvamVjdFVJLmNyZWF0ZVByb2plY3RVSShkZWZhdWx0UHJvamVjdC5uYW1lLCBkZWZhdWx0UHJvamVjdC5pZCk7XG4gICAgICBjb25zdCBwcm9qZWN0TGlFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LTBcIik7XG4gICAgICBjb25zdCBwcm9qZWN0Um93ID0gcHJvamVjdExpRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3Qtcm93XCIpO1xuICAgICAgcHJvamVjdFJvdy5jbGFzc0xpc3QucmVtb3ZlKFwicHJvamVjdC1yb3ctd2hpdGVzcGFjZVwiKTtcbiAgICB9O1xuICAgIGRlZmF1bHRQcm9qZWN0KCk7XG4gICAgZnVuY3Rpb24gYWRkUHJvamVjdChuYW1lKSB7XG4gICAgICBsZXQgcHJvamVjdCA9IG5ldyBQcm9qZWN0KG5hbWUpO1xuICAgICAgbXAuYWRkUHJvamVjdChwcm9qZWN0KTtcbiAgICAgIHByb2plY3RVSS5jcmVhdGVQcm9qZWN0VUkocHJvamVjdC5uYW1lLCBwcm9qZWN0LmlkKTtcbiAgICAgIHJldHVybiBwcm9qZWN0LmlkO1xuICAgIH1cbiAgICBwcm9qZWN0VUkuYWRkUHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbGV0IG5hbWUgPSBnZXROYW1lKCk7XG4gICAgICBsZXQgaWQgPSBhZGRQcm9qZWN0KG5hbWUpO1xuICAgICAgcHJvamVjdFVJLmNsb3NlUHJvamVjdElucHV0TmFtZSgpO1xuICAgICAgcHJvamVjdFVJLmFkZFByb2plY3RUb1Rhc2tGb3JtKGlkLCBuYW1lKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGRlbGV0ZVByb2plY3QoaWQpIHtcbiAgICAgIGlmIChpZCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhtcC5wcm9qZWN0TGlzdCk7XG4gICAgICBtcC5yZW1vdmVQcm9qZWN0KGlkKTtcbiAgICAgIHByb2plY3RVSS5yZW1vdmVQcm9qZWN0KGlkKTtcbiAgICAgIHByb2plY3RVSS5yZW1vdmVQcm9qZWN0RnJvbVRhc2tGb3JtKGlkKTtcbiAgICAgIGNvbnNvbGUubG9nKG1wLnByb2plY3RMaXN0KTtcbiAgICB9XG5cbiAgICBwcm9qZWN0VUkucHJvamVjdFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQuZGF0YXNldC5pZCA9PT0gXCJyZW1vdmUtcHJvamVjdFwiKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RIZWFkZXIgPSBlLnRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCBwcm9qZWN0Um93ID0gcHJvamVjdEhlYWRlci5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCBsaSA9IHByb2plY3RSb3cucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgaWQgPSBsaS5pZC5zcGxpdChcIi1cIilbMV07XG4gICAgICAgIGRlbGV0ZVByb2plY3QocGFyc2VJbnQoaWQpKTtcbiAgICAgICAgLy9tb3JlIGNsZWFuIHdheSB3b3VsZCBiZSBoYXZpbmcgdGhlIHNhbWUgaWQgbnVtYmVyIGluIGRhdGEtaWQgYXMgdGhlIGxpIGlkXG4gICAgICB9XG4gICAgfSk7XG4gIH0pKCk7XG5cbiAgY29uc3QgdGFza3MgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGFkZFRhc2socHJvamVjdElkLCB0YXNrTmFtZSwgdGFza0Rlc2NyLCB0YXNrUHJpbykge1xuICAgICAgbGV0IHRhc2sgPSBuZXcgVG9kbyh0YXNrTmFtZSwgdGFza0Rlc2NyLCB0YXNrUHJpbywgcHJvamVjdElkKTtcbiAgICAgIGNvbnNvbGUudGFibGUobXAucHJvamVjdExpc3QpO1xuICAgICAgbGV0IGFycmF5ID0gbXAucHJvamVjdExpc3Q7XG4gICAgICAvLyBsZXQgZmluZEVsZW1lbnQgPSBtcC5wcm9qZWN0TGlzdC5maW5kKChlKSA9PiBlLmlkID4gMjApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYXJyYXlbaV0uaWQgPT09IHByb2plY3RJZCkge1xuICAgICAgICAgIGFycmF5W2ldLmFkZFRvZG8odGFzayk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIG1wLnByb2plY3RMaXN0XG4gICAgICAvLyAgIC5maW5kKChwcm9qZWN0QXJyYXlFbGVtZW50KSA9PiBwcm9qZWN0QXJyYXlFbGVtZW50LmlkID09PSBwcm9qZWN0SWQpXG4gICAgICAvLyAgIC5hZGRUb0RvKHRhc2spOyAvL3JlZmVyZW5jZSB0byBvYmplY3QgaW5zaWRlIHRoZSBhcnJheVxuICAgICAgY29uc3QgdGFza0RPTU5hdkVsZW1lbnQgPSB0YXNrVUkuY3JlYXRlVGFza05hdkJhcihcbiAgICAgICAgdGFzay5pZCxcbiAgICAgICAgdGFzay50aXRsZSxcbiAgICAgICAgdGFzay5wcmlvcml0eVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRhc2tXcmFwcGVyID0gcHJvamVjdFVJLmdldFRhc2tXcmFwcGVyKHByb2plY3RJZCk7XG4gICAgICB0YXNrV3JhcHBlci5hcHBlbmRDaGlsZCh0YXNrRE9NTmF2RWxlbWVudCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VGl0bGUoKSB7XG4gICAgICByZXR1cm4gdGFza1VJLmZvcm1UaXRsZUVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldERlc2NyKCkge1xuICAgICAgcmV0dXJuIHRhc2tVSS5mb3JtRGVzY3JpcHRpb25FbGVtZW50LnZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRQcmlvKCkge1xuICAgICAgbGV0IGVsZW1lbnRzID0gdGFza1VJLmZvcm1Qcmlvcml0eUVsZW1lbnRzO1xuICAgICAgbGV0IGNoZWNrZWRWYWx1ZTtcbiAgICAgIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgaWYgKGVsZW1lbnQuY2hlY2tlZCkge1xuICAgICAgICAgIGNoZWNrZWRWYWx1ZSA9IGVsZW1lbnQudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNoZWNrZWRWYWx1ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0UHJvamVjdElkKCkge1xuICAgICAgbGV0IGVsZW1lbnQgPSB0YXNrVUkuZm9ybVByb2plY3RFbGVtZW50O1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGVsZW1lbnQudmFsdWUpO1xuICAgIH1cblxuICAgIHRhc2tVSS5hZGRUb2RvRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBhZGRUYXNrKGdldFByb2plY3RJZCgpLCBnZXRUaXRsZSgpLCBnZXREZXNjcigpLCBnZXRQcmlvKCkpO1xuICAgICAgdGFza1VJLmNsb3NlVGFza0lucHV0Rm9ybSgpO1xuICAgIH0pO1xuICB9KSgpO1xufSkoKTtcbiIsImNsYXNzIHByaW9yaXR5IHtcbiAgc3RhdGljIGdldCBISUdIKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2xvcjogXCJyZWRcIixcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgdGV4dDogXCJoaWdoXCIsXG4gICAgfTtcbiAgfVxuICBzdGF0aWMgZ2V0IE1FRElVTSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29sb3I6IFwieWVsbG93XCIsXG4gICAgICB2YWx1ZTogMSxcbiAgICAgIHRleHQ6IFwibWVkaXVtXCIsXG4gICAgfTtcbiAgfVxuICBzdGF0aWMgZ2V0IExPVygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29sb3I6IFwiZ3JlZW5cIixcbiAgICAgIHZhbHVlOiAyLFxuICAgICAgdGV4dDogXCJsb3dcIixcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCB7IHByaW9yaXR5IH07XG4iXSwic291cmNlUm9vdCI6IiJ9